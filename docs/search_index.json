[["index.html", "統計推論再考 – 概念と技法 – 目指すもの", " 統計推論再考 – 概念と技法 – By Chishio Furukawa 目指すもの データ保存・計算の飛躍的な技術革新を背景とし、データ分析を体系的に理解・実践する知識・技能の社会的意義が高まっている。本講義「ミクロ・データサイエンス」は、以下の二つのことを目的としている。 社会経済の理解の基盤となるデータ分析について、批判的に吟味できること (すなわち、結論を無批判・無反省に受け入れるのではなく、その仮定に気づき吟味できること) 日進月歩のプログラミング環境の中でも、その根本にある基礎概念は普遍的である。実際に経験することでそれらを学び、プログラミングをこれから独立して学び続けていくための知識・技能を体得すること 講義内容全体のマインドマップ: どう学ぶか 講義ビデオを確認できるため、ノートを自分で取ることの意義を見出しづらいかもしれない。しかし、本講義で用いている数式を理解するため、こつこつ自分の手でノートを取って考えて行こう。 講義ビデオが長くなってしまうときについては、目次において、特に重要なビデオに*をつけて強調している 講義では、自分でも気づかず「言い間違い」をしてしまうことがある。「あれ？」と思ったら、連絡をしてほしい *講義内容は、「歴史」や「雑談」の要素を大切にしています。これらについては、暗記をする必要はありません。 "],["主要な8の統計的考え方.html", "1 主要な8の統計的考え方", " 1 主要な8の統計的考え方 統計的手法は、多数の層から成る論理が積み重なっている山のようである。基礎から一歩一歩理解を進めていくためにも、まず、何を目指しているのか、その主要な考え方を見渡そう。 統計的思考への社会の要請 主要な考え方(1)確率分布 主要な考え方(2)最適化 主要な考え方(3)人間的制約 0. 統計的思考への社会の要請 要点 『データ・サイエンス』とは、①数理統計学、②コンピュータ・サイエンス、③対象の専門知識から成る学際的な手法群である よくある誤解 ビッグ・データがあれば、何でも分かる 統計学は専門家が理解していれば十分である 1. 主要な考え方(1)確率分布 要点 統計学 = 体系的に観察から理解を導出する概念装置 多くの自然・社会現象は、確率分布に従う 標本(現象の観察)と仮定を組み合わせて、確率分布を推測する 意思決定に役立つ情報とは、確率分布について分別できるものだ 2. 主要な考え方(2)最適化 要点 誤差の総和を、偶発誤差と系統誤差に分解できる 標本を大量に観察することで、偶発誤差を回避できる 標本を無作為に観察することで、系統誤差を回避できる 3. 主要な考え方(3)人間的制約 要点 強い仮定を置けば、脆弱だけれど明確な理解が得られる 複雑な仮定を置けば、解釈できないが精緻な理解が得られる 参考図書・文献 鳥居泰彦『はじめての統計学』、日本経済新聞出版、1994年 東京大学教養学部統計学教室 『基礎統計学I 統計学入門』東京大学出版会、1991年 竹村彰通『データサイエンス入門』、岩波新書、2018年 濵田悦生・狩野裕『データサイエンス入門シリーズ データサイエンスの基礎』講談社、2019年 "],["プログラミングの姿勢と技術.html", "2 プログラミングの姿勢と技術", " 2 プログラミングの姿勢と技術 実証研究とは、つまるところ、データを「インプット」とし、解析結果を「アウトプット」とするプログラムを書くことである。再現可能なプログラムを書くための心得を習慣づけよう。 プログラムの再現可能性* Rの特徴と初期設定 変数と関数の概念* Rプログラムの事始 RMarkdownの事始 1. プログラムの再現可能性 要点 再現可能性を向上し、信頼性と拡張可能性を改善するために、データ分析のためにスクリプトを用いてプログラミングをする データ分析プロジェクトの規模が大きくなると、たとえ時間をかけても、小さなミスを絶対に避けるための努力が要求される 2. Rの特徴と初期設定 要点 Rの強みは、オープン・ソースだからユーザーベースが広く、再現可能性に優れている点である Rの弱みは、計算効率があまり高くないことである まず初期設定をしよう 3. 変数と関数の概念 要点 変数とは、「名札」のついた情報を格納できる「箱」である。関数とは、「名札」のついた、引数に特定の操作をする「筒」である。 自己文書化を目指そう。コメントをせずとも、関数や変数の「名札」を使って、分析内容が分かるようにすることができる。 「名札」は、他人が読んで分からないほど省略しすぎない 「名札」のつけ方には、アルファベットと数字、そして「_」や「.」を使う 訂正: 「オブジェクト」は「変数」より広い概念で、「関数」を含めることもある。また、Rで実行されることの全ては「関数」の呼び起こしであり、アウトプットのないときもある。 4. Rプログラムの事始 要点 頻繁に使うコマンドのためには、Cheat Sheetを印刷して、手引きとしてすぐに使えるようにしよう エラー・メッセージなど、インターネットで検索すると、他の人が同じエラーを経験し、掲示板で質疑応答があることが多い 追加点: 英語話者のユーザーベースが広いため、Sys.setenv(LANG = \"en\")でエラーメッセージを英語で表示するように設定し、検索して解決策を見つけやすくしよう 5. RMarkdownの事始 要点 Rmarkdownを使って、コマンド、文書とアウトプットを組み合わせ、再現可能なプログラミングに近づける htmlもしくはMS Wordで出力し、PDFに変換して宿題を提出すること 参考図書・文献 Matthew Gentzkow and Jesse M. Shapiro. ``Code and Data for the Social Sciences: A Practitioner’s Guide.’’ 2014. University of Chicago Booth Memo. Michael Kremer ``The O-Ring Theory of Economic Development’’ 1993. The Quarterly Journal of Economics. 高橋康介 『Wonderful R 3 再現可能性のすゝめ RStudioによるデータ解析とレポート作成』共立出版、2018年 舟尾暢男『The R Tipsーデータ解析環境Ｒの基本技・グラフィクス活用集ー』、オーム社、2020年 "],["確率変数と確率分布.html", "3 確率変数と確率分布", " 3 確率変数と確率分布 確率分布は、すべての統計的推論の基盤となる「概念装置」である。この「装置」は極めて抽象的であり、最初は、具体的にどう役立つか見えづらいかもしれない。講義全体で最も分かりづらいと覚悟して、ここではまずその「装置」に触れてほしい。 確率変数と確率分布 確率変数のばらつき 連続型と離散型の確率分布 モンテ・カルロ法と逆関数法 1. 確率変数と確率分布 要点 確率変数とは、事象空間から実数空間への「関数」である \\(F(x)\\) が分布関数となる条件とは、分位関数( \\(F^{-1}(q)\\approx\\)分布関数の「逆関数」)が存在することである 確率変数の中心的傾向を表す代表値である期待値\\(\\mu\\)と中央値\\(m\\)を、分位関数を用いて定義できる \\[ \\mu = \\mathbb{E}[X] \\equiv \\int ^1_0 F^{-1}(q)dq \\\\ m \\equiv F^{-1}(\\frac{1}{2}) \\] 確率変数\\(Y = aX + b\\) の期待値について、以下の関係が成り立つ \\[ \\mathbb{E}[Y] = a\\mu + b \\] 2. 確率変数のばらつき 要点 確率変数のばらつきを表現するために、分散\\(V\\)や絶対偏差\\(AD\\) を用いる \\[ \\sigma^2 = V(X) \\equiv \\mathbb{E} [(X - \\mu)^2]\\\\ AD(X) \\equiv \\mathbb{E} |X - \\mu| \\] 平均二乗誤差(MSE = Mean Squared Error)は、系統誤差Bias \\(= \\mathbb{E}[\\hat{\\mu} - \\mu]\\) の二乗と偶発誤差Variance \\(= V(\\hat{\\mu})\\) に分解できる \\[ MSE \\equiv V(\\hat{\\mu} - \\mu ) = \\mathbb{E}[\\hat{\\mu} - \\mu]^2 + V(\\hat{\\mu}) \\] 確率変数\\(Y = aX + b\\) の分散について、以下の関係が成り立つ \\[ V (Y) = a^2 \\sigma^2 \\] 3. 連続型と離散型の確率分布 要点 分布関数の増加の度合を表現するために、連続型については微分可能なときに確率密度関数(probability density function)を用い、離散型については確率質量関数(probability mass function)を用いる 計測するとき・コンピュータにおいては、実際に連続的であっても離散的に扱う。 概念的に議論するときにおいては、厳密には離散的であっても連続的に考える 「連続型かつ離散型である」分布や、「連続型でも離散型でもない」分布も存在する 4. モンテ・カルロ法と逆関数法 要点 コンピュータでは、確定的である「疑似乱数」を用いて確率変数をシミュレーションする 逆関数法を用いて、(分位関数を近似できる一次元の)あらゆる分布のシミュレーションを行うことができる 参考図書・文献 東京大学教養学部統計学教室 『基礎統計学I 統計学入門』東京大学出版会、1991年 鎌谷研吾・小牧文保『データサイエンス入門シリーズ モンテカルロ統計計算』講談社、2020年 "],["典型的分布と大標本定理.html", "4 典型的分布と大標本定理", " 4 典型的分布と大標本定理 複雑な自然・社会現象であっても、いくつかの典型的な確率分布でモデルできる。ここでは、経済学分析においてもっとも重要な確率分布について、形成過程やその性質を具体的に考えていく。この確率論が、大数の法則や中心極限定理など、今後の統計推論のために欠かせない大標本定理につながっていく。 典型的確率分布について* 指数分布…待機問題の分布 正規分布…組み合わせ問題の分布 標本平均の大標本定理 … 大数の法則と中心極限定理* べき分布 … 分散が無限大となりうる分布 この講義では、正規分布を導出する確率過程や「べき分布」など、発展的なテーマも考えていく。これらの数式の詳細を、深く理解しなくても大丈夫。なぜ結論が成り立っているか、アプローチを把握してもらいたい。 1. 典型的確率分布について 要点: 確率過程によって形成される分布によって、多くの社会・自然現象を理解できる 「並列的な」和もしくは「直列的な」積の過程によって形成される 社会現象は積の過程によって形成されることが多い 2. 指数分布…待機問題の分布 要点: 独立した事象の待ち時間は指数分布に従い、\\(f(t) \\propto \\exp\\{-\\lambda t\\}\\) で定義される 指数分布では、密度の減少率が一定である \\[ \\frac{\\partial \\ln f(t)}{\\partial t} = - \\lambda . \\] 3. 正規分布…組み合わせ問題の分布 要点: 独立した確率変数の総和は正規分布で近似され、\\(f(t) \\propto \\exp\\{- t^2/2\\}\\) で定義される 正規分布では、対数密度が放物線となる。すなわち、密度の減少率が、中心からの距離に比例して増加する \\[ \\frac{\\partial \\ln f(t)}{\\partial t} = - t . \\] よって、中心から離れた値を取る確率が極めて低い 正規分布は、パスカルの三角形を用いて、組み合わせの「場合の数」から導出できる 4. 標本平均の大標本定理 … 大数の法則と中心極限定理 要点: ある分布から独立した\\(n\\)個の観察\\(X_{t}\\)の標本平均を以下のように定義する \\[ \\overline{X}_{n} \\equiv \\sum^{n}_{t=1} X_{t}/n \\] 大数の法則: 標本数が増えるにしたがって、標本平均が、分布の期待値に収束する \\[ \\text{As} \\:\\: n \\rightarrow \\infty, \\overline{X}_{n} \\rightarrow \\mu \\] (古典的)中心極限定理: 分布の分散が有限 \\(\\sigma^2 &lt; \\infty\\) のとき、標本数が増えるにしたがって、標本平均の分布が正規分布に従う \\[ \\text{As} \\:\\: n \\rightarrow \\infty, \\overline{X}_{n} \\rightarrow \\cal{N} \\:(\\mu,\\frac{\\sigma^2}{n}) \\] 言い間違い. ド・モアブルによる正規分布の導出は1933年ではなく、1733年です。 5. べき分布 … 分散が無限大となりうる分布 要点: べき分布は、中心から離れた値を取る確率が極めて高くなることがある。このようなとき、分布の分散が無限大となり(もしくは非常に大きくなり)、標本平均が、分布の期待値に収束するために膨大な標本数が必要となることがある 例: 地震のエネルギー、富の分布、企業規模など 参考図書・文献 松原望『人間と社会を変えた9つの確率・統計学物語』、2015年、SBクリエイティブ 東京大学教養学部統計学教室 『基礎統計学I 統計学入門』東京大学出版会、1991年 奥村晴彦 『Wonderful R 1 Rで楽しむ統計』共立出版、2016年 江崎貴裕『データ分析のための数理モデル入門 本質をとらえた分析のために』、2020年、ソシム 松下貢『統計分布を知れば世界が分かる 身長・体調から格差問題まで』中公新書、2019年 "],["条件づき確率と意思決定.html", "5 条件づき確率と意思決定", " 5 条件づき確率と意思決定 ここまで、確率分布の定義やその形成過程について考えてきました。ここでは、個々人の「考え」や「知識」を確率分布として表す枠組みを説明します。これから、データの比較分析に基づく統計手法について学んでいきます。しかし、日常生活は貧弱なデータしかなく、不確実性の残る下で意思決定を迫られることばかりです。ミクロ経済学の期待効用理論に基づいて、統計分析と日常的観察による知識を結び付けて考える方法を、まずここで考えたいと思います。 条件づき確率とベイズの定理* 正規分布とベイズの定理 期待効用理論と情報の価値* この講義は、統計手法の「実践」よりも、その解釈のための「教養」を重視した内容となっています。すぐには役に立たなくても、今後いつか、自分の考えを整理する一助となると思い、学んでください。 1. 条件づき確率とベイズの定理 要点 条件づき確率\\(\\mathbb{P}(A|B)\\)は、以下のように定義される \\[ \\mathbb{P}(A|B) = \\frac{\\mathbb{P}(AB)}{\\mathbb{P}(B)} \\] ベイズの定理: 条件づき確率には「内部対称性」があり、定義から以下のように書き換えることができる \\[ \\mathbb{P}(A|B) = \\frac{\\mathbb{P}(A)\\mathbb{P}(B|A)}{\\mathbb{P}(B)} \\] よって、「原因に条件づけて、結果の確率を推察できる」ことと同じように、「観察された結果に条件づけて、原因の確率を推察できる」(!) 2. 正規分布とベイズの定理 要点 ベイズの定理は、事後分布(posterior distribution)は、事前確率(prior distribution)と信号(signal)を組み合わせたものだと捉えることができる 正規分布の事前分布 \\(\\theta\\sim{\\cal N}\\left(\\theta_{0},1/\\psi_{0}\\right)\\) と信号 \\(s\\sim{\\cal N}\\left(\\theta,1/\\psi_{s}\\right)\\) を組み合わせるとき、事後分布は正規分布\\(\\theta\\sim{\\cal N}\\left(\\theta_{1},1/\\psi_{1}\\right)\\)に従う。ただし、 \\[ \\begin{align*} \\theta_{1} &amp; =\\frac{\\psi_{0}}{\\psi_{0}+\\psi_{s}}\\theta_{0}+\\frac{\\psi_{s}}{\\psi_{0}+\\psi_{s}}\\theta_{s}\\\\ \\psi_{1} &amp; =\\psi_{0}+\\psi_{s} \\end{align*} \\] 訂正: \\(\\ln \\mathbb{P}(\\theta|s) = \\ln \\mathbb{P}(\\theta) + \\ln \\mathbb{P}(s|\\theta) - \\ln \\mathbb{P}(s)\\) が正しいベイズの定理であり、 \\(\\ln \\mathbb{P}(s)\\)の項の前は負の符号です。 3. 期待効用理論と情報の価値 要点 情報の欠如を、期待効用最大化問題の「予算制約」のように捉えることができる ブラックウェルの定理: より役に立つ情報とは、この制約を緩和するものである 情報の中には、どちらがより役に立つか立たないか順序づけることはできないものもある(例えば、インターネットの上で画像データが蓄積されることにより保存されている「情報量」は増えるかもしれないが、社会的に重要な意思決定をより正しくする重要な情報が増えているとは限らない) より役に立つ情報とは、意思決定に重要な状態に関して、異なる状況をより正確に「分別」できるようにするものである 参考図書・文献 "],["最尤法と数値的最適化.html", "6 最尤法と数値的最適化", " 6 最尤法と数値的最適化 「確率」という概念に基づき、個人の知識を確率分布として捉える考え方を学びました。事前分布は置いておいて、標本分布から母集団分布についてどう学べるかという推定法について、これから学んでいきます。多くある推定法の中でも一般的である「最尤法」と、その根拠となる「尤度」の概念について考えます。その後、具体的に最尤推定量を得るための「数値的アプローチ」について紹介します。 推定の概要* 最尤法* 解析的・数値的アプローチについて 最適化アルゴリズム 1. 推定の概要 要点 現実に観察されるデータを「標本」とし、「仮説的無限母集団」や「潜在的結果」を想定し、その母集団分布について推測をする 推測の目的には、複数の異なるものがある パラメトリック法: データの縮約 … いくつかの母数(パラメータ)によって母集団分布をモデルし、その母数を推定する ノン・パラメトリック法: 結果の近似 … 特定のモデルを想定せず、母集団分布の近似・予測を目的として、多次元のモデルを推定する 2. 最尤法 要点 特定の標本\\(x\\)を所与として、あるパラメータ\\(\\theta\\)を想定する「もっともらしさ」の指標を尤度(likelihood)と呼び、その関数である尤度関数\\(\\cal{L}(\\theta|x)\\) は、 \\[ \\cal{L}(\\theta|x) = k f(x|\\theta) \\] を満たす. ここで、\\(f(x|\\theta)\\)は分布の密度関数もしくは質量関数であり、\\(k&gt;0\\)は任意の定数である. 尤度原則(likelihood principle) … データから推測できる全ての情報は、尤度\\(\\cal{L}(\\theta|x)\\) にまとめられている 最尤原理(maximum likelihood principle) … 標本は『尤度』が最大のものが実現したと仮定する 対数尤度を最大化し、最尤法を解く \\[ \\max_\\theta \\ln \\cal{L}(\\theta|x) = \\sum_{i=1}^{n} \\ln f(x_i|\\theta) + \\ln k \\] ベイズの定理における事前分布の情報を(ある特定の意味で)消去したものが最尤法だと解釈できる. 推定の段階で事前分布は使われていないが、解釈するときに、先験知=事前分布を組み合わせることができる. 補足説明: 最小二乗法は、最尤法の特殊形として捉えることもできるが、ノン・パラメトリック法の近似において使われることも多い。講義ビデオ7.4『なぜ「二乗」なのか』を参考にしてほしい。 3. 解析的・数値的アプローチについて 要点 最適化問題の解法には、解析的アプローチと数値的アプローチがあり、 解析的アプローチは厳密であり証明を用いて命題を示すが、数値的アプローチは近似的でありアルゴリズムを用いてシミュレーションの事例を示す 解析的アプローチで扱える分布などは限定的だが、数値的アプローチは汎用的でありほぼどのような問題でも解ける 4. 最適化アルゴリズム 要点 最適化問題を解くために、様々なアルゴリズムから効率がよく精度が高いものを選びたい 最適化アルゴリズムでは、初期値や許容誤差などを設定しなければいけない場合があり、これらが適切に設定されなければ、最適解に到達しないことがある 局所解に収束し、全体解に到達しない場合 最適化問題がとても平らであるため、許容誤差が十分に狭くない場合 変数の次元が増えると探索しなければいけない次元が指数関数的に増える 参考図書・文献 東京大学教養学部統計学教室 『基礎統計学I 統計学入門』東京大学出版会、1991年 奥村晴彦 『Wonderful R 1 Rで楽しむ統計』共立出版、2016年 "],["回帰分析と最小二乗法.html", "7 回帰分析と最小二乗法", " 7 回帰分析と最小二乗法 「ベイズの定理」と「最尤法」を用いて、観察から母数についてどう学べるか、という推定の問題を考えてきました。ここでは、2つの確率変数の関係性を分析するための回帰分析とその最も実用的な推定方法である最小二乗法について、2回を通じて学んでいきます。まず、ここでは2つの確率変数の関係について考察し、最小二乗法の概要を説明します。 相関関係と回帰分析の概要* 2つの確率変数の確率分布* 最小二乗法* なぜ「二乗」なのか *講義内容が多いため、1.5回分の講義だと考えてください。 1. 相関関係と回帰分析の概要 要点 多くの事象は、お互いにペアとなって変動する。これらの事象を反映する2つの確率変数\\(X\\)と\\(Y\\)の間に「相関関係がある」と言う 2つの確率変数の観察に相関が見られる理由は、4つある 偶然 \\(X\\)から\\(Y\\)への因果 \\(Y\\)から\\(X\\)への逆因果 交絡因子\\(Z\\)から\\(X\\)と\\(Y\\)への因果 よって、相関は必ずしも因果を示唆しない。しかし、多くの場合、相関は因果を反映している。 \\(X\\)によって\\(Y\\)を説明する関係式を推定することを「回帰分析」と呼ぶ。このとき、\\(X\\)を説明変数もしくは独立変数と呼び、\\(Y\\)を被説明変数もしくは従属変数と呼ぶ 計測した\\(X\\)と\\(Y\\)の関係式に\\(X\\)を代入し、\\(Y\\)の理論値を計算することを「予測」と言う 2. 2つの確率変数の確率分布 要点 あらゆる2つの確率変数\\(X\\)と\\(Y\\)の和について、以下の関係が成り立つ \\[ \\mathbb{E}\\left[X + Y \\right] = \\mu_X + \\mu_Y \\] \\[ V \\left(X + Y \\right) = \\sigma^2_X + \\sigma^2_Y + 2 Cov\\left(X,Y\\right)\\] ここで、 \\(Cov\\left(X,Y\\right)\\ = \\mathbb{E}\\left[\\left(X-\\mu_{X}\\right)\\left(Y-\\mu_{Y}\\right)\\right]\\) を共分散と呼ぶ。 確率変数の値から期待値を差し引き、標準偏差で割ることを、標準化と呼ぶ (すなわち、 \\(X^{\\ast}\\equiv\\frac{X-\\mu_{X}}{\\sigma_{X}}\\), \\(Y^{\\ast}\\equiv\\frac{Y-\\mu_{Y}}{\\sigma_{Y}}\\))。標準化された確率変数の共分散を、相関係数と呼ぶ \\[ \\rho \\equiv \\mathbb{E}\\left[X^\\ast Y^\\ast\\right] \\] また、\\(-1 \\leq \\rho \\leq 1\\) を満たし、相関の強さを表す 2つの確率変数について、独立\\(\\Rightarrow\\)無相関であるが、無相関\\(\\Rightarrow\\)独立ではない 2つの確率変数の分布を同時確率分布と呼び、うち1つの確率変数の特定の値に条件づけた分布を条件つき確率分布と呼ぶ。(それぞれ、密度関数についても同時密度、条件つき密度と呼ぶ。) これらのうち、特に重要なものが二次元正規分布であり、その分散を「分散共分散行列」を用いて表す。(正規分布は分布の形状が特定されているので、二次元正規分布においては、独立と無相関は同値である。) 3. 最小二乗法 要点 単回帰モデル \\[ Y=\\underset{定数項・切片}{\\underbrace{\\beta_{0}}}+\\underset{傾斜・勾配}{\\underbrace{\\beta_{1}}}X+\\underset{誤差項・攪乱項}{\\underbrace{\\varepsilon}}​ \\] 訂正: 講義ビデオで「錯乱項」と書かれているのは誤りであり、正しくは「攪乱項」である 単回帰モデルの推定 \\[ Y_{i}=\\underset{=\\hat{Y}_{i}...予測値・理論値}{\\underbrace{\\hat{\\beta}_{0}+\\hat{\\beta}_{1}X_{i}}}+\\underset{残差}{\\hat{\\varepsilon_{i}}} \\] 最小二乗法は、残差の二乗の総和\\(\\sum_i \\hat{\\varepsilon_{i}}^2\\) を最小化することによって、推定量\\(\\hat{\\beta}_{0}, \\hat{\\beta}_{1}\\)を得る 勾配\\(\\beta_1\\)が重要なパラメータとなる場合が多く、 \\[ \\beta_{1}=\\frac{Cov\\left(X,Y\\right)}{Var\\left(X\\right)}=\\rho \\frac{\\sigma_Y}{\\sigma_X} \\] である。 データに対する理論モデルの適合度を決定係数\\(R^2\\)で測り、 \\[ R^{2}=\\frac{\\sum_{i}\\left(\\hat{Y}_{i}-\\overline{Y}\\right)^{2}}{\\sum_{i}\\left(Y_{i}-\\overline{Y}\\right)^{2}}=\\frac{理論モデルで説明されるYの変動}{データにおけるYの変動}= \\hat{\\rho}^2 \\] 4. なぜ「二乗」なのか 要点 どの推定方法が適切かは、推定の目的に応じて変わる。しかし、多くの場合、最小二乗法が適切だと考えられる理由がある。 外れ値などがある場合が例外である。 様々な理由から、最小二乗法が望ましい 予測値を「条件つき期待値」として解釈できる 誤差が正規分布をするときの最尤法である 誤差の2次損失関数の期待値を最小化している 補足説明: 2次のテイラー近似は、近似している値(ここでは真の\\(Y_i\\))の近傍のみにおいて適切である。予測値\\(\\hat{Y}_i\\)が大きく乖離するときは、2次の損失関数と、人間の直観的基準が合致しないことがある。 参考図書・文献 Joshua Angrist and Jorn-Steffen Pischke “Mostly Harmless Econometrics: An Empiricist’s Companion”, Princeton University Press, 2009 James Stock and Mark Watson “Introduction to Econometrics.” Pearson Education Inc. 2007 今井耕介 『社会科学のためのデータ分析入門 上・下』 岩波書店、2018年 安藤洋美『最小二乗法の歴史』、現代数学社、1995年 西山慶彦・新谷元嗣・川口大司・奥井亮『計量経済学 Econometrics: Statistical Data Analysis for Empirical Economics』New Liberal Arts Selection、 有斐閣、2019年 栗原伸一・丸山敦史 『統計学図鑑』オーム社、2017年 "],["重回帰分析とその条件.html", "8 重回帰分析とその条件", " 8 重回帰分析とその条件 単回帰分析は2つの確率変数の間の関係性を定量化するものでした。しかし、現実にはより多くの事象が影響し、多くの実際のデータセットには複数の説明変数が含まれています。1つの被説明変数と2つ以上の説明変数の関係を明らかにする方法の中で最も実践的なものが重回帰分析であり、実証分析に欠かせない手法です。重回帰分析が望ましい性質を持つ条件を明らかにし、その条件が満たされないときにどのように問題が生じるか、どう対処できるかについて考えていきます。 重回帰分析* 推定量の望ましい性質 重回帰分析の最小二乗法(OLS)によって望ましい推定をするための条件* 外生性条件が満たされないとき* 独立同一分布条件が満たされないとき *講義内容が多いため、1.5回分の講義だと考えてください。 1. 重回帰分析 要点 因果関係 = Ceteris Paribus (他の諸条件を一定にした上で)の関係 複数の説明変数を取る回帰モデルを考え、最小二乗法で推定する \\[ Y=\\beta_{0}+\\beta_{1}X_{1}+\\beta_{2}X_{2}+\\varepsilon \\] \\(X_2\\)が\\(X_1\\)と\\(Y\\)の両方に影響がある場合、それらの影響を取り除くことができ、コントロール変数で制御すると言う 説明変数の数が多くても、残差の推定を用いて、2次元の散布図に視覚化することができる 2. 推定量の望ましい性質 要点 推定量\\(\\hat{\\theta}\\)そのものが確率変数であり、確率分布を持っている。なので、推定量の期待値\\(\\mathbb{E}\\hat{\\theta}\\)や分散 \\(Var\\left(\\hat{\\theta}\\right)\\)を考えられる 有限標本のもとで、不偏性や有効性(最小分散)を満たすことが望ましい 無限標本のもとで、一致性や漸近正規性を満たすことが望ましい 大標本定理により、最尤推定量は多くの場合一致性や漸近正規性を満たす モデルの不確実性に対する頑健性も重要である 補足: 推定量の標準偏差(standard deviation)\\(\\sqrt{Var\\left(\\hat{\\theta}\\right)}\\)を標準誤差(standard error)と呼ぶ 3. 重回帰分析の最小二乗法(OLS)によって望ましい推定をするための条件 要点 ガウス・マルコフの定理: (1)外生性(\\(\\mathbb{E}\\left[\\varepsilon|X\\right]=0\\))と(2)誤差項の独立同一分布(\\(\\mathbb{E}\\left[\\varepsilon^{2}|X\\right]=\\sigma^{2}\\)、\\(\\mathbb{E}\\left[\\varepsilon_{i}\\varepsilon_{j}|X\\right]=0\\))の仮定が満たされるとき、OLSは最小分散不偏線形推定量である。 「線形」とは、パラメータについて線形なモデルという意味で、\\(Y\\)と\\(X\\)の関係が非線形的であるときにも、(i)それぞれを非線形変換するか(ii)\\(X\\)の多項式で重回帰分析をできる 多重共線性に注意しなければならない 訂正. 講義ビデオでは「多重共変性」と書いているが、正しくは「多重共線性」である。 4. 外生性条件が満たされないとき 要点 データの不完全性によって外生性が満たされないとき、推定量にバイアスが生じる(\\(\\mathbb{E}\\hat{\\beta}_1 \\neq \\beta_1\\)) コントロール変数が欠落しているとき、欠落変数バイアス(omitted variable bias)が生じる 実際には、全ての説明変数を観察することはできないため、欠落変数バイアスが生じることが多い。「因果推論」の手法は、このバイアスを克服するためにある。 説明変数に測定誤差があるとき、減衰バイアス(attenuation bias)が生じる 説明変数に被説明変数の結果となっている要素があるとき、同時性バイアス(simultaneity bias)が生じる 5. 独立同一分布条件が満たされないとき 要点 誤差項が独立同一分布ではないとき、推定量の期待値(\\(\\mathbb{E}\\hat{\\beta}_1\\))には影響がないが、その分散(\\(Var(\\hat{\\beta}_1)\\))が正しく推定されない どれぐらいその推定量に自信を持ったらよいかを誤ってしまう 不均一分散である(\\(\\mathbb{E}\\left[\\varepsilon^{2}|X\\right] \\neq \\sigma^{2}\\))可能性が多いので、『不均一分散に対して頑健な標準誤差』をプログラムで常に使うことが望ましい 系列相関・自己相関がある(\\(\\mathbb{E}\\left[\\varepsilon_{i}\\varepsilon_{j}|X\\right]\\neq0\\))ことが多いので、『クラスター構造に対して頑健な標準誤差』をプログラムで常に使うことが望ましい 参考図書・文献 Jeffrey Wooldridge ``Econometric Analysis of Cross Section and Panel Data’’ The MIT Press, 2010 Joshua Angrist and Jorn-Steffen Pischke “Mostly Harmless Econometrics: An Empiricist’s Companion”, Princeton University Press, 2009 James Stock and Mark Watson “Introduction to Econometrics.” Pearson Education Inc. 2007 東京大学教養学部統計学教室 『基礎統計学I 統計学入門』東京大学出版会、1991年 西山慶彦・新谷元嗣・川口大司・奥井亮『計量経済学 Econometrics: Statistical Data Analysis for Empirical Economics』New Liberal Arts Selection、 有斐閣、2019年 "],["統計的検定.html", "9 統計的検定", " 9 統計的検定 どれだけ膨大なデータに複雑な分析をしても、他人に伝えられるのは結局、「差があるのかないのか」という結論のみであることもあります。統一的な基準がなければ、最後の結論づけにおいて主観的判断が大きくなり、結論の解釈が難しくなるでしょう。その統一的な基準を「手続き」として定めている概念が統計的検定です。近年、そもそも主観的判断に一切頼らずに判断をしようとすることが概念的混乱を引き起していると指摘されていますが、今までの研究の蓄積を理解するためにこの手続きが鍵となっていることは疑いありません。ここでは、ミクロ経済学における意思決定の枠組みであり、より日々の判断と整合性の高いベイズ学習と期待効用最大化と比べながら、統計的検定の手続きを理解していきます。 統計的検定の概論* 有意性検定と\\(p\\)値* 標本平均と\\(t\\)分布 \\(t\\)検定と信頼区間* 対立仮説と検出力 (ベイズ的)意思決定論と(頻度論的)統計的検定の対比 *講義内容が多いため、1.5回分の講義だと考えてください。 1. 統計的検定の概論 要約 統計的検定…データの情報を、他者に伝えるためにYes-or-Noに集約する「線引き問題」への系統的・伝統的アプローチ コンテクストや目的に応じて適切な基準を選ぶことが理想だが、「主観的」かつ「曖昧」になってしまう 「客観的」かつ「曖昧さのない」統計的検定が導入され、科学研究の共通言語・政策の決定基準となっているが、その恣意性・慣習性・概念的限界に留意して理解したい 2. 有意性検定と\\(p\\)値 要約 主観的意思決定者は、事前確率に基づき、「確からしい事後信念」が十分に強いならばYesと言う(もし強くないならNoと言う) 有意性検定を用いるとき、事前確率を一切想定せず、あらかじめ定められた以下の手続きを経て、統計的に有意ならば「Noとは言わない」と言うか、ある一定の意味でYesと言う(もしくは有意でないならば、「何も言えない」と言う) 『帰無仮説』を設定する 『有意水準』を選択する データに基づき、『\\(p\\)値』(=帰無仮説のもとでデータほど極端な観察をする確率)を計算する \\(p&lt;\\alpha\\)ならば帰無仮説を『棄却』し(=『統計的に有意』である)、\\(p\\geq\\alpha\\)ならば結論を留保する 3. 標本平均と\\(t\\)分布 要約 真の分散は分からないことが多いため、その推定値である不偏標本分散で代入する この不偏標本分散から導出される標準誤差を用いて標準化した値を\\(t\\)値と言い、自由度が\\(N-1\\)の\\(t\\)分布に従う \\(N\\)が小さいとき、\\(t\\)分布の裾は厚い \\(N\\)が大きいとき、\\(t\\)分布は正規分布で近似される 4. \\(t\\)検定と信頼区間 要約 ベイズ的意思決定者は、回帰分析の推定値を、事前信念と組み合わせ、事後信念を形成して意思決定をする 有意性検定では、実際には慣習として、ほとんどの場合、①帰無仮説を\\(\\theta_0=0\\)として設定し、②有意水準\\(を\\alpha=.05\\)に設定し、③片側検定ではなく両側検定で帰無仮説を棄却するかを決める。 幅を持たせた区間推定として、95％信頼区間を考えることが多い。 5. 対立仮説と検出力 要約 統計的に有意でないとき、その理由は①推定値\\(\\beta\\)が低いか、②標準誤差\\(SE\\)が大きいかによって、どう結論付けるかは異なることが現実的である 自ら\\(N\\)を選べるとき、目標となる対立仮説\\(\\theta_1 =\\theta^\\ast\\)を設定し、十分に「検出力」のある\\(N\\)を選ぶことによって、帰無仮説を棄却できないときは①推定値\\(\\beta\\)が低いからという理由に限定できる 仮説検定は、有意水準を一定として検出力を最大化するよに検定を設定するので、期待効用最大化と比べて保守的な意思決定基準であると言える 6. (ベイズ的)意思決定論と(頻度論的)統計的検定の対比 要約 \\(p\\)値をどの程度重視すべきか、について今日、学術的な論争がある ベイズ的な意思決定論において、事前分布の役割をゼロにするとき、多くの場合において、頻度論的考えに収束する \\(p\\)値によって『有意な差がある』という意味について明瞭な共通言語が与えられたが、以下の点で限定的である サンプル数が大きくないと、(現実的に)何も言えないこと ランダム化していないと、何も言えないこと 探索的な統計検定をしすぎると、(現実的に)何も言えなくなること 参考図書・文献 東京大学教養学部統計学教室 『基礎統計学I 統計学入門』東京大学出版会、1991年 奥村晴彦 『Wonderful R 1 Rで楽しむ統計』共立出版、2016年 豊田秀樹 『瀕死の統計学を救え！有意性検定から「仮説が正しい確率」へ』朝倉書店、2021年 デイヴィッド・サルツブルグ 『統計学を拓いた異才たち』竹内恵行・熊谷悦生訳、日経ビジネス人文庫、2010年 芝村良 『R.A.フィッシャーの統計理論 推測統計学の形成とその社会的背景』 九州大学出版会、2004年 今井耕介 『社会科学のためのデータ分析入門 上・下』 岩波書店、2018年 栗原伸一・丸山敦史 『統計学図鑑』オーム社、2017年 "],["社会調査.html", "10 社会調査", " 10 社会調査 ここまで、確率の概念的基礎づけや統計的推論について考えてきました。ここで、そもそもデータをどう収集するか、という統計分析の第一歩に立ち返りたいと思います。実際の社会経済現象を把握するためには、このデータ収集こそが肝要であり、地道な・地味な作業が求められます。調査から得られる数字を「追う」のではなく、その背後にある統計の標本の定義、標本数、回収率、質問の詳細などを「読んで」こそ、その数字を適切に解釈できると言えるでしょう。 調査統計の色々* 欠測値をどう扱うか* 答えづらい質問への正直な答えをどう引き出すか 1. 調査統計の色々 要点 調査統計には「全数調査」と「標本調査」があり、「全数調査」にかかる費用が大きくなりすぎるとき、その対象母集団の「縮図」となるような「標本調査」を行う 今日の公的統計においては無作為抽出法が標準的であり、単純無作為法のみでなく、「ばらつき」が大きくなるという弱点を補うために多段抽出法や層別抽出法が用いられる 調査にともなう誤差として、標本誤差のみでなく、以下のような非標本誤差がある 単純ミス 無回答 回答の偽り 非標本誤差が時間を通じて一定だと仮定して、「繰り返し横断調査」や「縦断調査」(パネル調査)などを用いて、時系列の変化を使うことが有効である 2. 欠測値をどう扱うか 要点 欠測値のあるデータを削除をしてしまうことがよくあるが、欠測がランダムでない限り、適切な対応ではない 「ないデータをつくることはできない」が、以下のような対応ができる 妥当だと思える回答を代入する 変数の変域が有限の場合、その上限・下限を代入し、「一番大きくて…」「一番小さくて…」というような値の取り得る幅を推定できる 3. 答えづらい質問への正直な答えをどう引き出すか 要点 回答者が他の人から好意的に見られるように答えることを「社会的望ましさバイアス」と言う このバイアスを完全に除去できないが、「ノイズを加える」ことによって、軽減できる 本人ではなく、身近な人について聞く 回答をランダム化する(選択肢のリストのランダム化、回答に乱数を加える、など) 参考図書・文献 佐藤明彦 『数字を追うな 統計を読め データを読み解く力をつける』 日本経済新聞出版社、2013年 東京大学教養学部統計学教室 『基礎統計学II 人文・社会科学の統計学』東京大学出版会、1994年 高井啓二、星野崇宏、野間久史 『欠測データの統計科学 医学と社会科学への応用 調査観察データ解析の実際１』岩波書店、2016年 宮川公男 『統計学の日本史 治国経世への願い』東京大学出版会、2017年 ゲアリー・スミス 『データは騙る 改竄・捏造・不正を見抜く統計学』川添節子訳、早川書房、2019年 Julian C. Jamison, Dean Karlan and Pia Raffler, “Mixed-Method Evaluation of a Passive mHealth Sexual Information Texting Service in Uganda” 2013. Information Technologies and International Development "],["因果推論の共変量制御アプローチ.html", "11 因果推論の共変量制御アプローチ", " 11 因果推論の共変量制御アプローチ ひとは誰しも「よりよい」と信じる方向へ進みたいものですが、現状を認識したら、その現状に対してどのような行動を取ればよいかを考えるでしょう。ここでは、「どのような選択をすればよいか」を考えるプログラム評価のための「統計的因果推論」について考えていきます。この因果推論においても、『未知の確率過程から生ずるデータを用いて、その過程のパラメータを推定する』という基本的考えは同じですが、『比較対象を設定する』という点において、今までの推定と決定的に異なっています。経済学者が長く取り組んできた問題であり、多くの手法・アプローチが考案されてきました。歴史や実例に触れながら、その発想法について2回の講義を通じて考えていきましょう。 潜在的結果と反実仮想にもとづく因果推論 選択効果から処置効果を分別するための識別条件 観測可能な共変量・属性による「マッチング」 時間を通じて安定した属性を制御する「固定効果」 1. 潜在的結果と反実仮想にもとづく因果推論 要点 因果効果\\(\\tau_i\\)(=諸条件(\\(X\\))を一定とした上で、処置(\\(D\\))を変えたときに生じる結果(\\(Y\\))の差)を考えるためには、比較対象を適切に設定しなくてはいけない 潜在的結果\\(\\{Y^T_i, Y^C_i\\}\\)は、処置の選択\\(\\{T,C\\}\\)によって「事前的に観測しうる」(a pri ori observable)結果である。このとき、\\(i\\)における因果効果とは \\[ \\tau_i =Y^T_i - Y^C_i \\] 事後的には、潜在的結果のうち事実(factual)のみしか観察できず、観測できない結果を反実仮想(counterfactual)と呼ぶ。すなわち、因果効果を推定するとは、すなわち反実仮想を推測することである 2. 選択効果から処置効果を分別するための識別条件 要点 因果効果の推定を、『反実仮想という比較対象の設定問題/ 欠測値の穴埋め問題』と捉えることができる 「主観的」 … 事前信念を用いて、\\(N=1\\)でも学習する 「より客観的」… 個人ではなく集団について、条件付期待値を推定する 処置効果 = 観測される「処置群」と「比較群」の差 - 選択効果 \\[ \\underset{=\\mathbb{E}\\left[\\tau_{i}|T\\right] (処置効果)}{\\underbrace{\\mathbb{E}\\left[Y_{i}^{T}|T\\right]-\\mathbb{E}\\left[Y_{i}^{C}|T\\right]}} = \\underset{=\\text{観察される差}}{\\underbrace{\\mathbb{E}\\left[Y_{i}^{T}|T\\right]-\\mathbb{E}\\left[Y_{i}^{C}|C\\right]}}-\\underset{=\\text{選択効果}}{\\underbrace{(\\mathbb{E}\\left[Y_{i}^{C}|T\\right]-\\mathbb{E}\\left[Y_{i}^{C}|C\\right])}} \\] 補足: 処置を受けた人への効果は、Treatment on Treated (ToT)だけでなく、Average Treatment on Treated (ATT)とも呼ばれる。 「主観的」… 選択効果を他の情報から吟味する(事例研究など) 「より客観的」… 選択効果を除去するような条件(識別条件)を満たすときを見つける 共変量を用いて、観測できる交絡因子を制御する 時系列の処置の変化を用いて、安定している交絡因子を制御する 処置の可能性が無作為になっているような状況を用いて、ほぼ全ての交絡因子を制御する 識別条件が厳しい状況の方がより信頼できるが、より難しい 補足:識別条件の仮定を、データのみから完全に吟味することはできない。 3. 観測できる共変量・属性による「マッチング」 要点 「マッチング」＝似ているもの同士でペアを組み、比較をすること 重回帰分析で共変量を制御することも、「マッチング」として捉えることができ、制御しきれない交絡因子によって生じる選択効果を欠落変数バイアスとして捉えることができる 重回帰分析における識別条件: \\[ \\mathbb{E}[Y^C|C,X] = \\mathbb{E}[Y^C|T,X] \\] 共変量を含めるかどうかの指針 交絡因子である場合 … Yes 媒介因子である場合 … No 測定誤差を減らせる独立因子である場合 … 基本的にYes 全く関係のない因子である場合 … No どの共変量を含めたらよいか、必ずしも分からないため、様々な共変量を入れて試す「感度分析」が大切である 訂正: 重回帰の3次元の図における\\(\\beta_0\\)は、切片ではなく、\\(D=0\\)の平面かつ回帰平面上の\\(X=0\\)となっている点である。 欠落変数バイアスの公式における選択効果の項は、\\(Cov(D_i, X_i)/Var(X_i) \\gamma\\)ではなく、\\(Cov(D_i, X_i)/Var(D_i) \\gamma\\)である 4. 時間を通じて安定した属性を制御する「固定効果」 要点 固定効果モデルでは、共変量として、ダミー変数\\(f_i\\)を含める \\[ Y_{it} = \\beta_1 D_{it} + f_i + \\varepsilon_{it} \\] 通常のOLSでは\\(i\\)の間のパターンを捉えるのに対し、固定効果モデルでは\\(i\\)の内のパターンを捉えることとなる 固定効果分析における識別条件: 全ての時点\\(t,s\\)において \\[ \\mathbb{E}[Y_{it}^C|C_{is}] = \\mathbb{E}[Y_{it}^C|T_{is}] \\] 参考図書・文献 William Shadish, Thomas Cook, and Donald Campbell “Experimental and Quasi-Experimental Designs for Generalized Causal Inference.” Houghton Mifflin Company. 2002. Joshua Angrist and Jorn-Steffen Pischke “Mostly Harmless Econometrics: An Empiricist’s Companion”, Princeton University Press, 2009 Guido Imbens and Donald Rubin “Causal Inference for Statistics, Social, and Biomedical Sciences: An Introduction”, Cambridge University Press, 2015 Judea Pearl and Dana MacKenzie “The Book of Why: The New Science of Cause and Effect” Penguine Books, 2019 西山慶彦・新谷元嗣・川口大司・奥井亮『計量経済学 Econometrics: Statistical Data Analysis for Empirical Economics』New Liberal Arts Selection、 有斐閣、2019年 伊藤公一朗 『データ分析の力 因果関係に迫る思考法』光文社新書、2017年 中室牧子、津川友介 『「原因と結果」の経済学 データから真実を見抜く思考法』ダイヤモンド社、2017年 安井翔太・株式会社ホクソエム 『効果検証入門 正しい比較のための因果推論/計量経済学の基礎』 技術評論社、2020年 佐藤俊樹 『社会科学と因果分析 ウェーバーの方法論から知の現在へ』岩波書店、2019年 Esther Duflo, Rachel Glennester, Michael Kremer 『政策評価のための因果関係の見つけ方 ランダム化比較試験入門』小林庸平監訳、日本評論社、2019年 "],["因果推論の実験的アプローチ.html", "12 因果推論の実験的アプローチ", " 12 因果推論の実験的アプローチ 因果効果の推定のために観測できる変数などで制御する方法を考えました。しかし、このようなアプローチでは「重要な共変量を制御しきれない」という「答え合わせ」の結果をきっかけに、選択効果を除去するような研究デザインにフォーカスをする「実験的アプローチ」が普及していきました。今日、経済学において広く受け入れられている因果関係は、この「実験的アプローチ」に基づくと言ってよいと考えています。ここでは、この「実験的アプローチ」の考え方を紹介し、決して平たんではなかったその成り立ちと、現在解決できていない課題についても考えていきます。 「研究デザイン」にもとづく実験的アプローチ 時系列の中の介入を用いる「差の差」推定 外生的な第3の変数を用いる「操作変数法」 境界を用いる「回帰非連続法」 政策介入を無作為割り付けする「ランダム化比較実験」 実験的アプローチの「局所性」と「脱理論性」 1「研究デザイン」にもとづく実験的アプローチ 要点 1960年代からアメリカで救貧・福祉政策のランダム化比較実験が試みられるようになり、従来十分だと考えられてきた「変数を制御する・統計手法で補正するアプローチ」が不十分ではないか、という1980年代末以降の多くの経済学者の経験的認識につながった 「実験的アプローチ」 … 研究デザインによって「選択効果」が生じない外生的な変動を用いることができる状況に着目 疑似実験・自然実験 … 制度や自然現象の外生性を用いて、ランダムかのように処置を考えられる実験 ランダム化実験・フィールド実験 … 研究者がフィールドで実験を設計し、ランダムに処置を割り付ける実験 「選択効果」をできる限り小さくしたいということは、すなわち、被験者の(主観的)厚生・選択の自由を犠牲にしている側面がある 「実験的アプローチ」によって、研究者が制度を詳しく知り、現場とより近い距離にいるようになった 2 時系列の中の介入を用いる「差の差」推定 要点 処置群と比較群の間における前後の間の差を考えることで、両群特性の違いを排除する推定方法が「差の差」(difference-in-difference)であり、event studies/ interrupted time seriesとも呼ばれる 推定式: \\(D_i = 0,1\\)と書くとき、 \\[ Y_{it}=\\beta_{0}+\\beta_{1}D_{i}+\\beta_{2}t+\\beta_{3}D_{i}\\times t+\\varepsilon_{it} \\] 識別条件: 並行トレンドの仮定 … \\(D_i = C,T\\)と書くとき、 \\[ \\mathbb{E}\\left[Y_{i1}^{C}-Y_{i0}^{C}|T\\right]=\\mathbb{E}\\left[Y_{i1}^{C}-Y_{i0}^{C}|C\\right] \\] 並行トレンドが満たされないとき 処置の前のトレンドが異なるパターンであるとき 同時に他の政策介入などがあるとき 傾向そのものが逆因果を引き起こすとき 追記: 処置群と比較群の二つのグラフを重複させるときは、y軸は、基準となるt=0を除去した\\(Y_{it} - Y_{i0}\\)となる 3 外生的な第3の変数を用いる「操作変数法」 要点 操作変数(Instrumental Variable, \\(Z\\)) = 結果\\(Y\\)に直接影響を与えないが、説明変数\\(D\\)を通じてのみ間接的に影響を与える変数 雨、地形、災害、子どもの性別など、人為の及ばない自然の予測・制御不可能な事象を用いることが多い 2段階の最小二乗法(2-Stage Least Squares): 真のモデルが\\(Y_i = \\beta_0 + \\beta_1 D_i + \\beta_2 X_i + \\varepsilon_i\\)のとき(ここで\\(X_i\\)は観測不能な交絡因子)、以下の2段階の回帰分析をし、 \\[ Y_{i}=\\alpha_{0}+\\alpha_{1}Z_{i}+\\nu_{i}\\:(\\text{Reduced form})\\\\ D_{i}=\\gamma_{0}+\\gamma_{1}Z_{i}+\\eta_{i}\\:(\\text{First stage}) \\] その係数を組み合わせて \\[ \\hat{\\beta_1}^{2SLS} = \\hat{\\alpha_1}/\\hat{\\gamma_1} \\] として捉えることができる 識別条件: (i) 関連性 … \\(Cov(D_i, Z_i) \\neq 0\\) と(ii)除外性 … \\(Cov(X_i,Z_i) =0, Cov(\\varepsilon_i,Z_i) =0\\) 操作変数の外生性を用いることにより、内生性による推定の問題(欠落変数バイアス、減衰バイアス、同時性バイアス)に対処できる 4 境界を用いる「回帰非連続法」 要点 多くの属性はなだらかに変化することがほとんどであるが、制度が非連続的に変化する近傍において、ほぼ政策のみが変化するような状況がある 最も基本的推定式: フレクシブルな関数\\(f\\left(Z_{i}\\right)\\)を用いて、 \\[ Y_{i}=\\beta_{0}+\\beta_{1}D_{i}+f\\left(Z_{i}\\right)+\\varepsilon_{i} \\] 識別条件: ランニング変数\\(Z\\)における非連続な点\\(Z^\\ast\\)(カットオフ)の近傍における連続性 … 微小な\\(\\varepsilon &gt;0\\)において、 \\[ \\mathbb{E}\\left[Y_{i}^{C}|C,Z\\in(Z^{\\ast}-\\varepsilon,Z^{\\ast}+\\varepsilon)\\right]=\\mathbb{E}\\left[Y_{i}^{C}|T,Z\\in(Z^{\\ast}-\\varepsilon,Z^{\\ast}+\\varepsilon)\\right] \\] 回帰非連続(regression discontinuity) … 処置効果を知るために、カットオフの右と左を比較 集積分析(bunching analysis) … 選択効果を知るために、カットオフにおける密度を測定 連続的な変化をどの関数形で近似し、その変化を制御するか、論争となることが多い 補足: Lee, Moretti, Butler (2014)の研究のアウトカムの「投票」は、市民の投票ではなく、選出された議員が衆議院の議題の賛否について投票するときにリベラルである傾向のスコアである。 5 政策介入を無作為割り付けする「ランダム化比較実験」 要点 理想的には、処置群と比較群の平均を比較するのみという極めてシンプルで透明な方法である \\[ Y_{i}=\\beta_{0}+\\beta_{1}D_{i}+\\varepsilon_{it} \\] 識別条件: 「潜在的結果からランダム抽出をできていること」 \\[ \\mathbb{E}\\left[Y_{i}^{C}|C\\right]=\\mathbb{E}\\left[Y_{i}^{C}|T\\right] \\] たとえ「ランダム割付」をしていても、この識別条件を満たさず「内的妥当性」を保障できないことがある 比較群の調整的行動 (プラセボの欠如) 波及効果・研究に参加することの効果 ランダムではない脱落・欠測 「前向き」(prospective)な研究であるからこそ、「後ろ向き」(retrospective)な研究にはないようなステップがある パイロット実験の実施・標本サイズの決定 研究プロトコルの登録・倫理委員会審査の審査 (被験者の厚生を保障するために、研究終了時に効果の期待されている処置を与えたり、もし悪効果があると分かったら、途中で中止をする) 6 実験的アプローチの「局所性」と「脱理論性」 要点 批判の内容: 実験的アプローチによる選択バイアスの克服は重要だが、個々の実験ではまだ解決できていない問題がある 実験は局所的である 実験は脱理論的である 対応①:「より多くの実験で解決しよう」…実験的アプローチを用いる対応 異なる環境における実験を数多く実施して統合する 異なるデザインの実験を組み合わせて、理論を検証できる (理論が正しいことを想定しなくてよい) 対応②:「実験以外の方法で解決しよう」…構造的アプローチを用いる対応 経済理論モデルを設定 モデル・パラメータを推定・カリブレーション 政策変更シミュレーション 参考図書・文献* William Shadish, Thomas Cook, and Donald Campbell “Experimental and Quasi-Experimental Designs for Generalized Causal Inference.” Houghton Mifflin Company. 2002. Joshua Angrist and Jorn-Steffen Pischke “Mostly Harmless Econometrics: An Empiricist’s Companion”, Princeton University Press, 2009 Florent Bedecarrats, Isabelle Guerin, and Francois Roubaud “Randomized Controlled Trials in the Field of Development: a critical perspective” Oxford University Press, 2020 Judith M. Gueron and Howard Rolston. “Fighting for Reliable Evidence” Russell Sage Foundation. 2013 アンドリュー・リー 『RCT大全 ランダム化比較試験は世界をどう変えたのか』(Randamistas: How Radical Researchers Changed Our World) 上原裕美子訳、みすず書房、2020年 チャールズ・ウィーラン 『統計学をまる裸にする データはもう怖くない』 (Naked Statistics - Stripping the Dread from the Data) 山形浩生・守岡桜訳、日本経済新聞出版社、2014年 西山慶彦・新谷元嗣・川口大司・奥井亮『計量経済学 Econometrics: Statistical Data Analysis for Empirical Economics』New Liberal Arts Selection、 有斐閣、2019年 伊藤公一朗 『データ分析の力 因果関係に迫る思考法』光文社新書、2017年 中室牧子、津川友介 『「原因と結果」の経済学 データから真実を見抜く思考法』ダイヤモンド社、2017年 安井翔太・株式会社ホクソエム 『効果検証入門 正しい比較のための因果推論/計量経済学の基礎』 技術評論社、2020年 Esther Duflo, Rachel Glennester, Michael Kremer 『政策評価のための因果関係の見つけ方 ランダム化比較試験入門』小林庸平監訳、日本評論社、2019年 講義ビデオで紹介した学術論文 LaLonde, Robert J, 1986. “Evaluating the Econometric Evaluations of Training Programs with Experimental Data,” American Economic Review Card, David. 1990. “The Impact of the Mariel Boatlift on the Miami Labor Market.” Industrial and Labor Relations Review. Angrist, Joshua and William Evans. 1998. “Children and Their Parents’ Labor Supply: Evidence from Exogenous Variation in Family Size.” American Economic Review Lee, David, Enrico Moretti and Matthew J. Butler. 2004. “Do Voters Affect or Elect Policies? Evidence from the U. S. House” The Quarterly Journal of Economics. Saez, Emmanuel. 2010. “Do Taxpayers Bunch at Kink Points?” American Economic Journal: Economic Policy Bertrand, Marianne, and Emir Kamenica and Jessica Pan, 2015. “Gender Identity and Relative Income within Households,” The Quarterly Journal of Economics Furukawa, Chishio. 2014. “Do Solar Lamps Help Children Study? Contrary Evidence from a Pilot Study in Uganda.” Journal of Development Studies. Furukawa, Chishio. 2017. “Health Benefits of Replacing Kerosene Candles with Solar Lamps: Evidence from Uganda” Working paper. Banerjee, Abhijit, Rema Hanna, Gabriel E. Kreindler, and Benjamin A. Olken 2017. “Debunking the Stereotype of the Lazy Welfare Recipient: Evidence from Cash Transfer Programs” World Bank Economic Review. "],["モデルの適合度と複雑性.html", "13 モデルの適合度と複雑性", " 13 モデルの適合度と複雑性 科学的推論の手法として、データ生成過程についての理論・仮定をおき、確率論にもとづいて望ましい性質を持つパラメータ推定について学んできました。ここでは、分析できるデータの拡充を背景として発展してきた、特定の理論を想定しない手法群を紹介します。これらは、理論に対応するパラメータを推定するのではなく、モデルによってデータを「説明」・「予測」することを目的としていて、具体的なアルゴリズムの発明を通じて、発展してきました。 モデルの適合と複雑性 適合度の分解と複雑性の最適化 情報量とモデル適合度の尺度 再標本抽出法とモデル適合度の測定 1. モデルの適合と複雑性 要点 データの生成過程のパラメータ推定ではなく、モデルをデータに適合し、予測に役立てることを目的とする実用的手法群がある ノン・パラメトリック推定 … 誤った仮定に依存しないために、特定の分布への仮定に依存しないモデル 機械学習 … 画像、音声、テキストなどのデジタル・フットプリント(『ビッグ・データ』)を、計算能力を駆使するアルゴリズム的手法として発展 理論・慣習によってモデルが与えられないため、「複雑性」と「精度」のバランスを取るように選ぶ 予測可能性と精度のトレード・オフ… より複雑なモデル群ほど、解釈・説明が難しいが、予測精度が高い。 アンサンブル法 … 「全てのモデルは間違っているから、組み合わせる」異なるモデルを組み合わせる「集合知」により、よりよい予測精度を達成できる 2. 適合度の分解と「複雑性」の最適化 要点 データには、「シグナル」と「ノイズ」があり、推定値\\(\\hat{f}(X_i)\\)を\\(f(X_i)\\)に近づけたいが、\\(\\varepsilon_i\\)には近づけたくない \\[ \\underset{観測値}{\\underbrace{Y_{i}}}=\\underset{シグナル}{\\underbrace{f(X_{i})}}+\\underset{ノイズ}{\\underbrace{\\varepsilon_{i}}} \\] 予測誤差は、「バイアス」2乗、「バリアンス」、「低減できないエラー」に分解できる $$ \\[\\begin{aligned} \\mathbb{E}(Y-\\hat{f}(X))^{2} &amp; =\\mathbb{E}(f(X)+\\varepsilon-\\hat{f}(X))^{2}\\\\ &amp; =\\underset{=Bias^{2}}{\\underbrace{(\\mathbb{E}\\hat{f}(X)-f(X))^{2}}}+\\underset{=Var}{\\underbrace{Var(\\hat{f}(X))}}+\\underset{=IrreducibleError}{\\underbrace{Var(\\varepsilon)}} \\end{aligned}\\] $$ (複雑性が相対的に低いとき) 過剰適合 (overfit)… モデルの「複雑さ」が増えると、バイアスは低いが、「未知のデータ」でのバリアンスが大きくなってしまう。よって、最適な「複雑さ」を選ぶには、適度にバイアスを含めなくてはいけない (!) (複雑性が相対的にとても高いとき) 二重降下 (double descent)… モデルの「複雑さ」が増えると、「ブレ」が少ないモデルに近づく 訂正: 「複雑性」は「自由度」ではなく、言うなれば、「サンプル数 ー 自由度」である 3. 情報量とモデル適合度の尺度 要点 シャノン情報量(\\(S\\)) … 「情報とは、不確実性の解決である」 \\[ \\mathbb{E}S = - \\mathbb{E} \\log \\mathbb{P}(E) \\] (注意: ただし、これらの尺度が「情報の有用性」を反映しているとは限らない) パラメータの数\\(k\\)のモデル複雑性を考慮した適合度の尺度として、調整済み\\(R^2\\)に加え、情報量規準(Information Criterion)がある \\[ \\underset{=未知のデータでの誤差}{\\underbrace{-\\mathbb{E}^{X}\\ln f\\left(X\\right)}}=\\underset{=既知のデータでの誤差}{\\underbrace{-\\sum_{i=1}^{N}\\frac{\\ln f\\left(X_{i}\\right)}{N}}}+\\underset{=罰則項}{\\underbrace{k\\frac{c_{n}}{N}}} \\] 赤池情報量規準(Akaike Information Criterion)の場合は、\\(c_n = 1\\)であり、ベイズ情報量規準(Bayes Information Criterion)の場合は、\\(c_n = \\ln N\\)である (補足訂正: 「情報量基準」は「情報量規準」と書くことが多い) 4. 再標本抽出法とモデル適合度の測定 要点 モデル適合度を測定するために、ランダムさを加えることが効果的となりうる(!) ブートストラップ法(Bootstrap) … 標本集団から、重複を許して同じ標本数をランダムに再標本抽出し、それらのデータで統計量を推定することで、統計量の分布を推定する方法 交差検証法(Cross Validation) … 標本データを訓練集合(training set)と検証集合(testing set)にランダムに分割し、訓練集合を用いてパラメータを推定し、検証集合を用いてそのモデルの「未知のデータ」に対する適合度を測定すること 参考文献 Sendhil Mullainathan and Jann Spiess. 2017. ”Machine Learning: An Applied Econometric Approach.” Journal of Economic Perspectives. Hal Varian. 2014. “Big Data: New Tricks for Econometrics.” Journal of Economic Perspectives. Susan Athey and Guido Imbens. “Machine Learning Methods That Economists Should Know About” 2019. Annual Review of Economics. Leo Breiman “Statistical Modeling: The Two Cultures (with comments and a rejoinder by the author)” 2001. Statistical Science. Stuart Geman, Elie Bienenstock, Rene Doursat “Neural Networks and the Bias/Variance Dilemma” 1992. Neural Computation. Mikhail Belkin, Daniel Hsu, Siyuan Ma, Soumik Mandal “Reconciling modern machine-learning practice and the classical bias–variance trade-off” 2019, PNAS. Bradley Efron, Trevor Hastie 『大規模計算時代の統計推論―原理と発展― (Computer Age Statistical Inference: Algorithms, Evidence, and Data Science)』藤澤 洋徳・井手 剛監訳・井尻 善久・井手 剛・牛久 祥孝・梅津 佑太・大塚 琢馬・尾林 慶一・川野 秀一・田栗 正隆・竹内 孝・橋本 敦史・藤澤 洋徳・矢野 恵佑訳 2020. 共立出版 ショーン・ジェリッシュ 『スマートマシンはこうして思考する』(How Smart Machines Think) 依田光江訳、みすず書房、2020年 大坪直樹、中江俊博、深沢祐太、豊岡祥、坂元哲平、佐藤誠、五十嵐健太、市原大暉、堀内新吾 『XAI (説明可能なAI) そのとき人工知能はどう考えたのか？』リックテレコム、2021年 加藤公一、秋庭伸也、杉山阿聖、寺田学 『機械学習図鑑 見て試してわかる機械学習アルゴリズムの仕組み』翔泳社、2019年 "],["分布の推定.html", "14 分布の推定", " 14 分布の推定 統計的手法では正規分布を仮定し、平均と分散のみに着目をすることが多いです。しかし、正規分布とは異なる分布と実際になることも多く、分布をより柔軟に捉えたいこともよくあります。ここでは、経済学の実証研究でもよく用いられる分布・密度を推定する手法を学びます。 分位回帰 カーネル密度推定 1. 分位回帰 要点 平均の「差」のみでなく、分布それぞれの分位点の「差」を推定できる (ただし、特定の個人に対する効果ではないことに注意) 分位回帰(quantile regression)では、チェック関数\\(\\rho (\\varepsilon)\\) の最小化問題を解く \\[ \\min_{\\beta_{\\tau}}\\sum_{i}\\rho\\left(\\varepsilon_{i}\\right) \\] ここで、 \\[ \\begin{aligned} \\varepsilon_{i} &amp; =y_{i}-X_{i}\\beta_{\\tau}\\\\ \\rho\\left(\\varepsilon_{i}\\right) &amp; =\\tau\\varepsilon_{i}1(\\varepsilon_{i}&gt;0)+\\left(1-\\tau\\right)\\left(-\\varepsilon_{i}\\right)1(\\varepsilon_{i}\\leq0) \\end{aligned} \\] 2. カーネル密度推定 要点 十分な数の正規分布の混合分布によって、あらゆるスムーズな密度を任意に近似できる カーネル関数\\(K(.)\\)を用いて、データの測定値\\(X_1, X_2, ..., X_n\\) を所与としたとき、値\\(x\\)におけるカーネル密度関数は \\[ \\hat{f}\\left(x\\right)=\\frac{1}{nh}\\sum_{i=1}^{n}K\\left(\\frac{x-X_{i}}{h}\\right) \\] 平滑化パラメータ\\(h&gt;0\\)が大きすぎると適合不足となり、小さすぎると過剰適合となる 参考文献 Roger Koenker and Kevin Hallock, “Quantile Regression.” 2001. Journal of Economic Perspectives. Joshua Angrist and Jorn-Steffen Pischke “Mostly Harmless Econometrics: An Empiricist’s Companion”, 2009. Princeton University Press Qi Li and Jeffrey Racine, “Density Estimation, from Nonparametric Econometrics: Theory and Practice” 2006. Princeton University Press. Bernard Silverman “Density Estimation for Statistics and Data Analysis.” 1986 Chapman and Hall "],["非線形回帰モデル分類モデル.html", "15 非線形回帰モデル・分類モデル", " 15 非線形回帰モデル・分類モデル 重回帰分析では、アウトカムが量的変数である線形回帰モデルを主に考えました。ここでは、アウトカムが量的変数で説明変数に対して非線形の関係を持つ回帰モデル、そして質的変数である分類モデルを考えます。これらの統計モデルはとてもたくさんありますが、主要なものを説明します。 また、(少なくとも現時点で)経済学研究に用いられることは多くありませんが、人工ニューラルネットによる機械学習で、従来の統計モデルでは不可能だったデータの分析が可能となっています。これらによって直面しなければならない新しい社会的・哲学的な課題も考えます。 潜在変数モデル 多項式と縮小推定量 スプラインと局所回帰による平滑化 決定木、ランダム・フォレストとブースティング 人工ニューラルネットと深層学習 機械学習の「思考」、「創造性」と「倫理的課題」 1. 潜在変数モデル 要約 \\(Y_i \\in \\{0,1\\}\\)に対して、潜在変数\\(Y_i^\\ast = \\beta_0 + \\sum_{j=1}^k\\beta_j X_{ji} + \\varepsilon_i\\) が閾値\\(0\\)を越える確率として考えることができ、\\(\\varepsilon_i\\)の分布を\\(F\\)と書くと、 \\[ \\mathbb{E}Y_{i}=F\\left(\\beta_0 + \\sum_{j=1}^k\\beta_j X_{ji}\\right) \\] などとして書ける。 プロビット(probit) … \\(F(\\varepsilon_i) = \\Phi(\\varepsilon_i)\\)、正規分布を仮定 ロジット(logit) … \\(F(\\varepsilon_i) = \\exp(\\varepsilon_i)/[1 + \\exp(\\varepsilon_i)]\\) 、ロジスティック分布を仮定 線形確率モデル … \\(F(\\varepsilon_i) = \\varepsilon_i + 1/2\\) 、一様分布を仮定 (局所的近似として解釈) 限界効果\\(\\partial \\mathbb{E}Y_{i}/ \\partial X_{li} = \\beta_l f\\left(\\beta_0 + \\sum_{j=1}^k\\beta_j X_{ji}\\right)\\)に着目して、係数を解釈する 被説明変数が離散的で3つ以上の値を取るときにも適用できる 2. 多項式と縮小推定量 要約 経済学の実証研究で最もよく用いるフレクシブルな非線形モデルは、多項式(polynomial)モデルと交互作用(interaction effects)モデルである 多項式モデル … \\(Y_i = \\beta_0 + \\beta_1 X_{i} + \\beta_2 X_{i}^2 +... + \\beta_k X_{i}^k + \\varepsilon_i\\) 交互作用モデル … \\(Y_i = \\beta_0 + \\beta_1 X_{1i} + \\beta_2 X_{2i} + \\beta_3 X_{1i}X_{2i} + \\varepsilon_i\\) 十分な数の項を用いれば、(限定的な変域において)スムーズな関数を任意に近似できる 変数の間の相関が強いとき(多項式の高次項など)、多重共線性によって推定値の分散がとても大きくなってしまう 正則化 … 目的関数に罰則項を加え、推定値にバイアスを含めることでバリアンスを減らすことができる \\[ \\sum_i^N \\varepsilon_i^2 + \\lambda \\sum_j^k[\\alpha \\beta_j^2 + (1-\\alpha) |\\beta_j|] \\] リッジ回帰 (\\(\\alpha = 1\\)) … ベイズ的事前分布としての解釈 LASSO回帰 (\\(\\alpha = 0\\)) … 変数の数が標本の数よりも大きいときの変数選択 elastic net回帰 (\\(\\alpha \\in (0,1)\\)) … リッジ回帰とLASSO回帰の組み合わせ 縮小推定量 … 推定された係数にはバイアスがかかっているため、解釈には注意が必要 交差検証法によって\\(\\lambda, \\alpha\\)の値を選ぶことができる 3. スプラインと局所回帰による平滑化 要約 テイラー近似 … \\(x\\)の近傍においては、低次元の多項式によってスムーズな関数を近似できる スプライン平滑化 (spline, piecewise polynomials) … いくつかの変域に分割し、多項式を変域ごとに推定 変域の境界でも\\(\\hat{f}^{\\prime \\prime}(x)\\)が等しくなるという制約のもと、3次の多項式を推定することが多い (cubic spline) 局所回帰 (local regression, LOWESS = locally weighted scatterplot smoothing) … 近傍の観測値により重い比重\\(w_i(x)\\)を置いて、それぞれの値\\(x\\)ごとに回帰をすること \\[ \\min_{\\beta} \\sum_{i=1}^n w_i(x) (Y_i - \\beta_0 - \\sum_{l=1}^k\\beta_l X_{li})^2 \\] \\(k = 0\\) … カーネル回帰 (kernel regression) \\(k = 1\\) … 局所線形回帰 (local linear regression) データ全てを記憶する推定方法である 4. 決定木、ランダム・フォレストとブースティング 要約 変数の次元が大きく、高次の交互効果が重要な状況に有効な手法 決定木 … 説明変数に応じて、不確実性を最小化するような条件分岐を繰り返すことで分類・回帰をするモデル 決定木の「葉ノード」が十分にあれば、任意の関数に完全に適合できる。しかし、データについて「葉ノード」が多すぎるとき、過剰適合となってしまう アンサンブル学習法(ensemble learning) … 複数のモデルを組み合わせて、予測精度を改善する方法 バギング(bootstrap aggregating)、ランダム・フォレスト … ブートストラップ法で標本サンプルを複製し、それぞれのデータで深い決定木を推定し、統合する推定方法 ブースティング … 浅い決定木を残差に基づいて繰り返し推定し、その結果に比重をつけて統合する方法 適応的なカーネル法と捉えられる 5. 人工ニューラルネットと深層学習 要約 特に画像、音声、テキストなどの「非構造化データ」を分析するためにとても有効な手法 パーセプトロン … 入力\\(X\\)に重み\\(w\\)をつけ、活性化関数\\(f()\\)を通じて出力\\(Y\\)を決定する関数である \\[ Y_i = f(w_0 + \\sum_k w_k X_{ik}) \\] 例: \\(f(u) = \\max(u, 0)\\)、\\(f(u) = \\exp(u)/(1+\\exp(u))\\) 人工ニューラルネットとは、複数のパーセプトロンをつなぎあわせた「隠れ層」を持つ合成関数である パーセプトロンが十分に多くあり、活性化関数が非線形であれば、(たとえ「隠れ層」が浅くとも) あらゆる関数を任意に近似できる (万能近似定理) 深層学習 … 「隠れ層」が多くあるとき、非常に高い予測精度を持つ 畳み込みニューラルネット、再帰型ニューラルネットなど “complexity is a compounded simplicity.” 重要な技術革新を経て、いくつもの「冬の時代」を乗り越えてきた 逆伝播法 確率的勾配降下、ドロップアウト法などによる最適化 大量のデータ パラメータの数が膨大なのに汎化能力も高いことから、「二重降下」などの理論的発展につながっている。特徴量空間におけるカーネル法の一種だと捉えられる。 Neural network playgroundでアルゴリズムを試すことができる 6. 機械学習の「思考」、「創造性」と「倫理的課題」 要約 「人工知能」を人の知能に対してどのように位置づけるか、が社会的・哲学的問いとなっている 機械学習 = 明確にプログラム化されずに、自動で学んでいく機械 特徴量学習・パターン認識 敵対的ゲームによる自動学習 \\(\\Leftrightarrow\\) 従来の考え方 = プログラムされたこと以上のことを機械はできない 人間の脳を物質と化学反応として理解できるなら、機械は(i)その働きを近似でき、(ii)生物学的制約を克服できる 機械は「思考」を持ちうるか 認知主義的アプローチ = 機械は「意識」を持っているか 行動主義的アプローチ = チューリング・テスト … 「人とコミュニケーションすることと分別をできなかったら、機械は思考しているとする」 機械は「創造性」を持ちうるか 創造性 = 既存のアイデアの新しい組み合わせ \\(\\Rightarrow\\) 創造 = 潜在的に存在する組み合わせの中で有意義なものを発見するための探索 広大な探索 適切な評価 機械に適切な「目的関数」を与えることが難しく、人間がつねに抱えていた倫理的課題をより強く突き付けている。例として… コンテンツ推薦システムの中毒性 人種・性別差別をする人材評価システム 炎上発言をするチャットボット 「トロッコ問題」を抱える自動運転システム 覇権国家の監視システム 自律型致死兵器システム (LAWS = Lethal Autonomous Weapons System) 参考文献. 西山慶彦・新谷元嗣・川口大司・奥井亮『計量経済学 Econometrics: Statistical Data Analysis for Empirical Economics』New Liberal Arts Selection、 有斐閣、2019年 梅津佑太、西井龍映、上田勇祐 『スパース回帰分析とパターン認識』講談社、2020年 Bradley Efron, Trevor Hastie 『大規模計算時代の統計推論―原理と発展― (Computer Age Statistical Inference: Algorithms, Evidence, and Data Science)』藤澤 洋徳・井手 剛監訳・井尻 善久・井手 剛・牛久 祥孝・梅津 佑太・大塚 琢馬・尾林 慶一・川野 秀一・田栗 正隆・竹内 孝・橋本 敦史・藤澤 洋徳・矢野 恵佑訳 2020. 共立出版 Hal Varian. 2014. “Big Data: New Tricks for Econometrics.” Journal of Economic Perspectives. Susan Athey and Guido Imbens. “Machine Learning Methods That Economists Should Know About” 2019. Annual Review of Economics. 岩沢宏和、平松雄司 『入門 Rによる予測モデリング――機械学習を用いたリスク管理のために』2019. 東京図書 今泉允聡『深層学習の原理に迫る 数学の挑戦』岩波書店、2021年 立山秀利 『ディープラーニングAIはどのように学習し、推論しているのか』2021. 日経BP. Yann LeCun 『ディープラーニング 学習する機械 – ヤン・ルカン、人工知能を語る』2021. 松尾豊監訳/ 小川浩一訳. 講談社 富谷昭夫 『これならわかる機械学習入門』 2021. 講談社 岡野原大輔 『ディープラーニングを支える技術 ——「正解」を導くメカニズム[技術基礎] 』2022. 技術評論社 岡谷貴之 『深層学習 機械学習プロフェッショナルシリーズ』2022. 講談社 川村秀憲、山下倫央、横山想一郎 『人工知能が俳句を詠む AI一茶くんの挑戦』2021. オーム社 徳井直生 『創るためのAI 機械と創造性のはてしない物語』2021. ビー・エヌ・エヌ Stuart Russell 『AI新生 人間互換の知能をつくる』(Human Compatible: Artificial Intelligence and the Problem of Control) 松井信彦訳. 2021. みすず書房 Sean Gerrish『スマートマシンはこうして思考する』(How Smart Machines Think) 依田光江訳. 2020. みすず書房 松尾豊 『人工知能は人間を超えるか ディープラーニングの先にあるもの』2015. 角川EPUB選書 https://machinelearningmastery.com/impressive-applications-of-generative-adversarial-networks/ Brundage et al. “The Malicious Use of Artificial Intelligence: Forecasting, Prevention, and Mitigation” 2018. 柴田正良『ロボットの心 ７つの哲学物語』2001. 講談社現代新書 "],["コミュニケーションの課題.html", "16 コミュニケーションの課題", " 16 コミュニケーションの課題 社会科学が、正確かつ蓄積可能なプロセスであるためには、「プログラミングはコンピュータ言語でコマンドを書くことだ」というだけでコードを書くことは十分ではありません。プログラミングには、「自分の論理を明瞭化」し、「他者が誤解しえず読みやすい文書化」を目指すプロセスが必要だと考え、どのような工夫が大切かを体系的に考えています。講義２回分とします。 プログラミングのよくある誤謬とよくある誤解 プログラミングと意思伝達問題 プログラミングへのアプローチとアナロジー アルゴリズムと疑似コード 変数と関数の名前づけ 関数とパッケージ 1. プログラミングのよくある誤謬とよくある誤解 要点 よくある誤謬 他人や過去の自分の書いたコードを理解できない・実行できない 何年もプログラムを書いているのに、どこか「ぐちゃぐちゃ」している コードの書き方が分からないところをインターネットで検索してつないだため、一貫性がない よくある誤解 プログラミングの仕事は主にコードを書く作業である プログラムとして機能していれば十分 初めて書くコードが読みづらいのは、知識と技術が足りないからである 2. 意思伝達問題としてのプログラミング 要点 プログラミング・プロジェクトとは、『複数の発信者』と『複数の受信者』の意思伝達問題である。 プログラムの四元徳 (four cardinal virtues) clear (明瞭性) … 自分は何をお願いしたいのか・指示したいのか effective (有効性) … プログラムは、どうお願いをしたら理解してくれるか consistent (一貫性) … 読者は、どのようなプログラムであれば理解しやすいか flexible (柔軟性) … 共同研究者は、どのようなコードであれば変更を加えやすいか プログラムのアウトカムに求められることは「徳」である 日々の心の習慣であって、突然変えようと思ってもできない 知識や技術ではなく、他者への「配慮」が基盤である 意識しなければ、満たさないような「衝動」が常にある 3. プログラミングへのアプローチとアナロジー 要点 複雑な意思決定問題に取り組むには、以下の二つが根本的要素となる 長い工程を複雑な区切る: コードは数百～数千の内容があるのに、人間のワーキングメモリーは同時に５～７つ以上の内容を整理できない 読者を熟知する: 表現が分かりやすいかは、読者の「内的世界の文化」による 『複数の発信者と複数の受信者の意思伝達問題』の事例 学術論文 新聞 『複数の発信者と複数の受信者の意思伝達問題』に必要な体系的アプローチ ７つほどのセクションに分かれたフォーマットがある 体系的レビューのプロセスがある 一貫した内部のルールがある 4回書き直す 4. アルゴリズムと疑似コード 要点 達人プログラマーも、フローチャート(flow chart)・疑似コード(pseudocode)を書く アルゴリズム: インプットからアウトプットまで、複数のステップで到達するプロセス 疑似コード: 自然言語で書くアルゴリズムの設計図 コンピュータ言語を調べなくてよいため、アルゴリズムの論理構造に思考を集中できる 着想と執筆の間に、時間を空けることができる アルゴリズムの全体像を俯瞰できる 他人にアルゴリズムを説明するために適切である プログラムを書く次のステップが格段に楽になる 疑似コードを書いてから、プログラム言語が分かっていないところを集中的に調べる 5. 変数と関数の名前づけ 要約 「プログラムではなく、ドキュメントを書く」(自己文書化) よい名前は、機能を表し、コメントを代替する 悪い名前でもコードは機能するが、読者を混乱させバグのもととなる 世界中の誰もが読めるように英語で書く 語彙を補強するために、同義語辞典 が役立つ 具体的に気をつけること 機能が分かるように、VerbとObject (noun)の区別と組み合わせを意識する すぐに分からない略称を使わない スタイルを統一する (setParamValues … ラクダ式, set_param_values … スネーク式) 6. 関数とパッケージ 要点 関数(function)とは、コマンドをひとまとめにしたものである パッケージ(package)とは、「関数集」である パッケージはライブラリに保存され、複雑な依存関係(dependencies)があるため、順序正しくインストールされなければならない オープンソースであるため、アップデートなどによってコンフリクトを起こすことがある。この場合、ライブラリを新しく設定したり、既存のライブラリを２つとも消去して、インストールしなおすと正しい順序でインストールしエラーを解消できることが多い。 参考図書・文献 Matthew Gentzkow and Jesse M. Shapiro. ``Code and Data for the Social Sciences: A Practitioner’s Guide.’’ 2014. University of Chicago Booth Memo. Dustin Boswell and Trevor Foucher. 『リーダブルコード ―より良いコードを書くためのシンプルで実践的なテクニック (Theory in practice) 』 角征典 (翻訳) オライリー・ジャパン 2012年 縣俊貴『良いコードを書く技術 ── 読みやすく保守しやすいプログラミング作法』 技術評論社 2021年 西尾泰和『コーディングを支える技術 ~成り立ちから学ぶプログラミング作法』 技術評論社 2013年 David Thomas and Andrew Hunt 『達人プログラマー ―熟達に向けたあなたの旅― 第2版』 村上雅章 (翻訳) オーム社 2020年 Robert Martin. “Clean Code: A Handbook of Agile Software Craftsmanship” 2008. Prentice Hall. "],["プログラミングの環境管理.html", "17 プログラミングの環境管理", " 17 プログラミングの環境管理 快適にプログラミングの作業を続けるためには、コードを書くだけではなく、その「環境」であるフォルダーとファイルを管理することが欠かせない。この講義では、「環境管理」についての考え方と具体的なツールについて説明をする。 分類と順序 フォルダー構造の整理 バージョン管理とGit クラウド保存とGitHub GitHubとRStudioによるGitの活用 (「環境」という言葉で、R、パッケージ、関連プログラムのバージョンのことを指すこともありますが、ここではより広い意味で使っています。) 1. 分類と順序 要点 世界には膨大な要素があるが、人が同時に操作できる対象は\\(7 \\pm 2\\) までである 膨大な数の対象を分かりやすく示すには、 1.「近いもの」をグループにして分類し、ピラミッド型にして、各層における対象の数を\\(\\sim 7\\)ほどにすること 分類には、“Mutually Exclusive and Collectively Exhaustive” (MECE = ダブりなくモレなし)を心がける それぞれの順序を論理的に並べること 2. フォルダー構造の整理 要点 フォルダーの分類には3つのタイプがあり、それらを組み合わせて使うことが多い by topic: プロジェクトや授業ごと … 一般に、幹に近い枝により適切 by time: 日付や学期ごと by type: ワードファイルやRファイルなど … 一般に、枝葉の先により適切 フォルダーの順序は、デフォルトで「アルファベット順」になっており、頭に”01_…“などの番号をふることにより、論理的な順序に並び替えることができる by importance: 重要度順 by time: 時系列順 by structure: 構造順 Windowsで「フォルダーツリー」を印刷するには、以下のステップを踏む 補足: 検索機能やショートカットを使うこともできる 補足: 1階層のフォルダーの多さと、階層の深さの間にトレードオフがある 3. バージョン管理とGit 要点 バージョン管理 = 複数のバージョン (ファイルの状態) を保存しておくこと 過去のバージョンを回復できるようしつつ 現在のバージョンを明確に区別する必要がある 自分なりのアプローチ: ファイルを異なる時点で「ファイル名」を変更して保存する 問題点(1) … ファイル名を考えることが大変で、実際と一貫性がないことがある 問題点(2) … 何が最新ファイルか分からなくなることがある 問題点(3) … データが膨大になる 問題点(4) … いつ保存すればよいか分かりづらい Gitによるアプローチ: 変更歴を.gitファイルに保存するrepository を用いる アプローチ(1) … ファイル名ではなく、変更内容をコメントとして「コミット」する (ファイル名はハッシュを使う) アプローチ(2) … 変更歴は「隠れファイル」として封印する アプローチ(3) … テキストファイルについて、diff (変更点)のみを保存する アプローチ(4) … (あまり本質的な解決策はない) Gitを賢明に活用するコツ .gitignore を使って、保存したくないファイルを対象から外す 可能な限り、binary ファイルではなく、textファイルを使う 4. クラウド保存とGitHub 要点 クラウド保存 = 世界中に散らばっているデータセンターにデータを保存すること メリット1. 保管の安全性 メリット2. 共有の利便性 メリット3. 利用の柔軟性 GitHub = .gitのウェブサービス ローカルとリモートのリポジトリを用いることによって、データの安全性を高める 手順: Clone = リポジトリをダウンロードする Pull = 変更をダウンロードする Stage = コミットする準備をする Commit = 変更を反映させる (Commit message = メールの件名のように) Push = アップロードをする GitHubを賢明に活用するコツ README.md を使って、プロジェクト全体の説明をする 5. GitHubとRStudioによるGitの活用 要点 RStudio をGitHubのGraphical User Interface (GUI)として利用できる Git/ GitHubの設定 自分のGitHubアカウントを作成する (http://github.com/) Gitをインストールする (https://git-scm.com/downloads/) RStudioのコンソールでアカウントを登録する(以下のの”TaroYNU”と “YNU_taro@ynumail.com”を自分のものに変更する) install.packages(&quot;usethis&quot;) usethis::use_git_config(user.name = &quot;TaroYNU&quot;, user.email = &quot;YNU_taro@ynumail.com&quot;) リモートリポジトリをクローンする RStudioを賢明に活用するコツ .Rprojを用いてプロジェクト全体を管理することにより、作業ディレクトリを変更しなくてよくなる (複数人で作業を進めるためには、ブランチやコンフリクトなどの重要な概念などがあるが、今回はここまでとしよう。) 参考文献 Minto, Barbara. “The Pyramid Principle: Logic in Writing and Thinking”. 2009 (originally, 1987.) Financial Times Prentice Hall 佐藤可士和 『佐藤可士和の超整理術』 2011. 日経ビジネス人文庫 株式会社オープングルーヴ, 昌子正俊「よくわかる入門Git」2019. 秀和システム 大串肇/久保靖資/豊沢泰尚 「Gitが、おもしろいほどわかる基本の使い方33 改訂新版」2019. MdNbooks 横田紋奈/宇賀神みずき「いちばんやさしいGit&amp;GitHubの教本 人気講師が教えるバージョン管理&amp;共有入門」2018.インプレス "],["データ分析プログラミング-1.html", "18 データ分析プログラミング (1)", " 18 データ分析プログラミング (1) 再現可能な実証研究のためには、多大な努力と時間をプログラミングに充てなければならない。この講義では、生データから分析レポートまで作成するためのワークフローについて学んでいく。全てのプロセスのためにプログラムを書くことは最初は大変だけれど、よいプログラムを書くために気をつける心がけなども考えていきたい。 データ分析のワークフロー データの種類 保存と分析に望ましいデータ形式 関数の活用 データの整理・変換のためのtidyverseパッケージ群の関数 プログラミングについて一貫して説明をするために、Peanuts Data Projectを例として作成した。こちらの例を参考にしながら説明をする。 1. データ分析のワークフロー 要点 データ分析のワークフロー raw … データの保存 build … データの準備 (整理と加工) analyze … 統計モデルによる分析と図表作成 report … 文書作成 データ分析プログラミングは、「料理の指示書づくり」 下準備が努力の８割 道具を効果的に使おう 配膳にも気を配ろう 家庭・地域それぞれのスタイルがある 安全性と衛生に気を配ろう 手を動かして、長年かけて技能を磨く よい料理は素材を活かす 2. データの種類 要点 解釈 量的 (quantitative) … 単位があり、四算できる: 例 … テストの点数 質的 (categorical) … 分類である: 例 … 朝ごはんに何を食べたか データ型の分類 数値型 (numeric) … 整数 (integer)と小数点以下を含む実数 (double) 文字列型 (character) … 引用符”…“もしくは’…’で囲まれる 論理値型 (logical) … TRUE/FALSE &lt;文字列ではない！&gt; 因子型 (factor) … 1: MALE, 2: FEMALEなど その他 … NULL, NA, NaN, Inf, 日時, 複素数など データ構造 ベクトル (行列もある) リスト データフレーム … 同じ長さのベクトルを要素に持つリスト (tibble … 適切な動作をできるようにしたデータフレーム) 3. 保存と分析に望ましいデータ形式 要点 データ = 一定の形式を持った情報 テーブル … 表形式に格納したデータ (列: 変数、行: 観察、要素: 値) 関係データ(relational data)として保存する 正規化 = 論理構造を反映するようにテーブルを分割して保存する キー (主キー、外部キー) = レコードを特定するための列 整然データ(tidy data)に整形する (分析のしやすさ \\(\\neq\\)入力のしやすさ、見やすさ) それぞれの列が、一つの変数に対応する それぞれの行が、一つの観測に対応する それぞれのテーブルが、一つのデータに対応する 4. 関数の活用 要点 自作の関数は、以下の形を取る (argument = 引数、outcome = 戻り値) function_name &lt;- function(argument){ outcome &lt;- ...(argument) ... return(outcome) } (補足: outcomeは最後の行に書かれていれば、return()と書かなくても戻り値となるため、省略することを好むスタイルもある) 関数 = 複数のコマンドをひとまとめにしたもの コードを分割可能にする (副作用なし、状態なし) コードの可読性を向上する 同じ操作の繰り返しを減らし、エラーを減らすことができる Rの特徴: object-based functional-style program Rで存在するあらゆるものはオブジェクトである Rで起こるあらゆることは関数の呼び出しである 関数そのものもオブジェクトであり、関数を引数として受け取る関数を「高階関数」と呼ぶ 5. データフレームの整理と変換 要点 データフレーム(df)には、列、行、グループの要素があり、データ整理・変換のために以下のような操作をする。 列: 新しい変数をつくる … dplyr::mutate(df, var_name = ...()) 変数を抽出する … dplyr::select(df, var_name) 行: 特定の条件を満たす行を抽出する … dplyr::filter(df, var_name ...) 行の順序を並び替える … dplyr::arrange(df, var_name ...) グループ: グループを作成し、解除する … dplyr::group_by(df, var_name), dplyr::ungroup(df, ) グループごとに統計量を集約する … dplyr::summarize(df, avg = mean(var_name)) データフレーム(df1, df2)を結合させる IDを結合させる … dplyr::left_join(df1, df2, by = \"id\") ただ結合させる(行/ 列) … dplyr::bind_rows(df1, df2), dplyr::bind_cols(df1, df2) 複数の連続操作の可読性を上げるために、パイプ演算子%&gt;%を用いることができ、“and then”として読む。以下の二つは同じ操作である。 中間データを用いる場合 gdp_japan &lt;- dplyr::filter(gdp_world_annual, country == &quot;JPN&quot;) gdp_japan2 &lt;- dplyr::group_by(gdp_japan, decade) gdp_japan_decade &lt;- dplyr::summarize(gdp_japan2, avg_gdp = mean(gdp)) gdp_japan_decade2 &lt;- dplyr::ungroup(gdp_japan_decade) パイプ演算子%&gt;%を用いる場合 gdp_japan_decade &lt;- gdp_world_annual %&gt;% dplyr::filter(country == &quot;JPN&quot;) %&gt;% dplyr::group_by(decade) %&gt;% dplyr::summarize(avg_gdp = mean(gdp)) %&gt;% dplyr::ungroup() (なお、パイプ演算子での操作が5~7を越える場合、中間データを表記した方が読みやすい) これらのコードを調べるためには、dplyr cheat sheetと tidyr cheat sheetが役に立つ。 参考文献 この講義は、主にホームページでの紹介している書籍やリソースをもとにしている。これらに追加して、以下の書籍を参考にした。 Jonathan A. Schwabish “An Economist’s Guide to Visualizing Data” 2014. Journal of Economic Perspectives Michael Friendly, Howard Wainer 『データ視覚化の人類史――グラフの発明から時間と空間の可視化まで』(A History of Data Visualization &amp; Graphic Communication)飯嶋貴子訳、青土社、2021年 John Chambers “Professional R”、 中村道宏訳、共立出版、2019年 石井大輔、漆畑充、及川大智、大下健史、オング優也 『現場のプロが伝える前処理技術 ~基礎から実践まで学ぶ テーブルデータ/自然言語/画像データの前処理』 マイナビ出版、2020年 本橋智光『前処理大全[データ分析のためのSQL/R/Python実践テクニック]』技術評論社 、2018年 "],["データ分析プログラミング-2.html", "19 データ分析プログラミング (2)", " 19 データ分析プログラミング (2) この講義は、「データ分析プログラミング(1)」のつづきである。 統計モデルの推定 文書の作成 図の作成 表の作成 衛生・安全性の確保 エラーへの向き合い方 1. 統計モデルの推定 要点 統計モデルは、データを集約するため・モデルを当てはめるために、「最適化問題」を解いて推定する。 統計モデルを用いるためには、「手法開発者」と「分析実践者」のスペクトラムがある。 分析実践においては、統計分析アルゴリズムは複雑であっても、プロセスが定式化されているため、“grab-and-go”のパッケージで自動化されていることが多い。 インプット: (1) データとモデル変数の対応付け、(2) チューニング・パラメータ 補足: チューニング・パラメータについては、デフォルトがパッケージに設定されていることが多い アウトプット: リストとして推定値が出力される パッケージの実行は「自動化」されているが、統計モデルを十分に理解していないために、誤って用いてしまうことが多い 2. 文書の作成 要点 多くのデータ分析レポートにおいて、文が75%、図表が25%ほどとなる データ可視化の目的 視覚的伝達 … 「百聞は一見に如かず」(A Picture is Worth a Thousand Words.) 実証研究結果を、一つの図(graphical poem)に凝縮させよう 探索的発見 … 推定値のみでは気づかないパターンがある 3. 図の作成 要点 図の文法 (grammar of graphics) … 図 = データを視覚的要素に対応づけ、座標軸に「形」として配置し、ラベルなどを加えたもの 視覚的要素 = aesthetic mapping x軸、y軸の位置 大きさ/ 形状 … 少し太めに 色彩 … 補足・灰色・パレットの活用/ 色弱・色盲への配慮 幾何学的要素の種類を特定し、ラベルなどを「層」として重ねていく よい図の特徴 = 脳の視覚的情報処理機能の活用 デザインの工夫 「無駄な要素」(chart junk)をなくす 強弱をつける パターンをつくる (small multiples) 誇大な・虚偽な印象を与えないこと なお、ggplot2パッケージを使うためには、ggplot2 cheat sheetがとても便利である。 4. 表の作成 要点 カテゴリー変数 x (カテゴリー変数 x) アウトカム変数のデータを表すために適切 よい表のための工夫 縦線を入れないこと 横線を減らすこと 数値の桁数を調整すること 回帰表において、統計的優位な場合に**をつけるかどうかについては、「出版バイアス」の観点から、賛否両論がある 5. 衛生・安全性の確保 要素 欠測値 (missing values) / 重複値 (duplicates) … 唯一の正しい対処法はないので、いくつかのパターンで保守的なものを選ぶ 明示的 (explicit) 暗示的 (implicit) 外れ値 (outliers) / エントリーミス … 分布や値の変域を確認する ただ「データを眺める」(browse)する時間も大切である プログラムの一貫性の問題 全体を統括するmasterスクリプトをつくる パッケージの整合性の問題 パッケージの関数のマスキング パッケージの誤った更新 6. エラーへの向き合い方 要点 “if you haven’t seen error messages, you haven’t been programming.” 誰でも、プログラミングの50%の時間は、エラーへの対応に使う。 確認の原則 … バグへの対応とは、「間違っている箇所が見つかるまで、自分の理解が正しいことを確認していく作業」である。だから、エラーは、自分の理解と技術を磨く砥石である。 どこにエラーがあるか仮説を立てよう エラーメッセージは、問題が発生したときの「ガスの匂いづけ」 エラーについて検索し、周囲に聞こう 小さなテスト・ケースを書いて、仮説を検証しよう よくあるエラーのパターン オブジェクトの名称の書き間違い、), }, + などの位置や数の間違い データの型や構造が不適切 "],["授業の形式と内容.html", "20 授業の形式と内容", " 20 授業の形式と内容 この講義ビデオホームページを見て、本授業を履修するかどうかを検討する学生もいるかもしれない。「数式がたくさん出てくる」という第一印象だけで決めつけないでほしい。この授業の形式と内容について、紹介をしたい。 授業形式について 授業内容について 「ほうれん草のおひたし」のような授業を 要点. 「手書き講義動画」のメリット 複雑な数式や図式を、順序を追って説明してくれること 分からなかったら途中で止めて、何度も見直せること 講義をビデオに任せることで、個別の質問に答える余裕をつくれること 特定の教科書の内容に沿って教えないで、多くの内容を組み合わせて教えられること 1. 授業形式について この授業では、 (1) 手書き講義動画 (2) 宿題 (3) 合同・個別オフィスアワー を組み合わせて、学生が統計分析についての理解を深められるようにしています。 (1)「手書き講義動画」 … 「手書き」の講義動画をつくり、この講義内容をまず確認してもらうようにしています。もしかしたら「スライド」や「講義ノート」を配布した方がいいのではないか、という声もあるかもしれません。どうして「手書き」を選んだのか、これは僕が学生時代にどう勉強したかという経験がもとになっています。 大学生として僕が初めて線形代数(linear algebra)の授業を履修したとき、概念に慣れていなくて、授業についていくのが必死でした。そのとき、僕が頼っていたものが、授業の教科書を執筆したStrang先生がMIT Open Coursewareという取り組みを通じて公開してくれた、板書式の講義動画でした。対面の講義で「よく分からなかった」と思うと、その夜に図書館で講義ビデオを聞いて勉強をしていました。 複雑な数式や図式を、順序を追って説明してくれること (メリット1) 分からなかったら途中で止めて、何度も見直せること (メリット2) もっと時間をかけて書いてくれているはずの教科書を読むより、オンラインの講義ビデオを観た方が頭にすっと内容が入ってくる(!)、ということが僕の大学生時代の実感でした。大学院に進学してからも、自分が一番「なるほど！」と思った授業は、黒板に数式を順番に書いていってくれる内容が多かった。 (2)「宿題」 … 数学の内容は「講義を聞くと分かっている」と感じても、実際に問題に取り組むと「どう解いたらよいか分からない」ことが多くあります。問題に取り組んで試行錯誤することで、講義内容が今まで知っていることにどうつながっているのか、有機的に考えられると言えるでしょう。また、締め切りがないと講義動画を確認するリズムが乱れがちになってしまうという声もありました。そこで、ペースメーカーの役割も含め、毎週(ただし、ほかの授業と両立させるため、中間試験・期末試験の週はのぞく)、講義動画の理解を確かめ深めることを目的とした宿題を出しています。宿題は、同級生と議論しながら取り組めるようにしています。試験はありません。 (3) 合同・個別オフィスアワー … 講義内容についての質問に答えるために、授業時間などに合同・個別オフィスアワーを設定しています。普通は「授業時間中に講義を聞き、放課後に宿題に取り組む」ところを、「放課後に講義を聞き、授業時間中に宿題に取り組む」とひっくり返す「反転授業」という形式の試みです。 講義をビデオに任せることで、個別の質問に答える余裕をつくれること (メリット3) 「手書き講義動画」のインスピレーションとなったカーン・アカデミー(https://www.khanacademy.org/) が、講義動画を充実させる意義として、教員の役割の転換と言っています。学生それぞれの発想や経験によって、どこに疑問を持つかも様々なことが多いです。なので、教員にとって個別にコメントをできる余裕をつくれることが、講義動画の大きな意義です。 2. 授業の内容について この講義では、統計学の入門から、実践的技能までを対象としています。今日の統計学は、従来の「頻度論」的考え方を基礎とした枠組みへの問題意識が共有され、またプログラミングの新しい内容が重要となるなど、一つの教科書では教えることが難しくなっています。学生が復習をしやすいように一つの教科書を選ぶことが通常望ましいとされていますですが、講義動画を用いて、内容を学生のペースで再確認してもらうことができます。 特定の教科書の内容に沿って教えないで、多くの内容を組み合わせて教えられること (メリット4) 学生の中にはデータサイエンスを職業としたい人もいることを踏まえ、通常あまり説明をすることが多くないようについてもエネルギーを割いています。例えば、 統計学で得られる知見と、より日常的な知識を、どのように連続的に考えたらよいか (講義５、９) なぜ多くの事象は正規分布で近似されるのか (講義4.3) なぜ誤差の「二乗」を最小化するのか (講義7.4) などについて、です。「学生にとって、異なる考え方に触れることが重要だ。」J.ネイマンに代表される「頻度論的」考え方が主流であったカリフォルニア大学バークレー校において、そう考えて、D.ブラックウェルは1950年代から「ベイズ的」考え方に基づく統計学の授業を教えていました(!) 「試験に出る内容を、無駄なく教える」ことより「広く教養を身につけられるよう、余談などもする」方針で講義内容をつくりました。これから、どこかで実際に統計分析をより詳しく調べなくてはいけないときに、「これどこかで聞いたことがある」という発想・見識の「引き出し」をたくさん備えてほしいからです。 3. ほうれん草のおひたしのような授業を 大学では、多くの講義がオファーされていて、まるで「学生がこれから社会で生きていくための体をつくる」食堂から、料理を選ぶようであります。僕は、この講義が、食堂の「ほうれん草のおひたし」のような存在であったら、と考えています。 (1) ほうれん草のおひたしのように、少し「しぶい」味である … 統計学は、素材として、ケーキのように「甘い」味ではなく、ほうれん草のように「しぶい」味だと考えています。もともと食欲をそそるものではないかもしれません。講義では、ゴマを和え、鰹節をふって、お醤油をかけて、できるだけおいしく食べられるようにしています。それでも、あくまで素材の味を生かした講義を心がけました。 (2) ほうれん草のおひたしのように、多くの「栄養」をぎゅっとまとめている … 生のほうれん草はとても嵩張りますが、おひたしにするとぎゅっとまとまります。講義では、できるだけ多くの文献を参考にし、要点を集約するように心がけました。(ゆでると栄養が少し熱で溶けてしまうと言われることもありますが、鉄・ビタミンの多くはしっかり残るようです。) (3) ほうれん草のおひたしのように、目立たない「副菜」である … 多くの学生にとって、統計学は、そのものだけではなく、調査研究対象への関心と知識と組み合わさってこそ意義のある理論・技術体系だと考えています。だから、社会経済の課題・現象に目を向け、それら「主菜」と一緒に統計学を学んでいってほしいと思っています。 僕は、ずっと、おばあちゃんのつくってくれる「ほうれん草のおひたし」が苦手でした。小学校のころは、食事の最後まで残して、お箸でひっくり返しつづけ、よくられていました。家庭料理のおいしさが分かるようになったのは、留学生活を何年もしてからでした。好きではなかったけれど「ほうれん草のおひたし」を食べていたことは、自分の健康のためによかったのだと思います。「ほうれん草のおひたし」を食べればしっかり食べれるように、この授業も着実に取り組めば決してムダになりません。今日、社会経済を理解するために、統計を全く使わないことはないでしょう。数学や統計が苦手であっても、頑張って習得すれば、将来よりバイタリティのある考えを持って社会に参加できるようになると考えています。 "],["rを学ぶためのリソース.html", "21 Rを学ぶためのリソース", " 21 Rを学ぶためのリソース プログラミングを学ぶためには、自分でリソースを探し疑問を解決していくことが欠かせない。ただ、インターネットや書店にもRの書籍や情報が膨大にあり、どれを参考にしたらよいか分かりづらい。ここでは、データ分析のプログラミングを学ぶために特に役に立つと考えるリソースを紹介する。 指針 … tidyverse Rへの準拠: Rには、伝統的に使われてきたbase Rと、2010年代後半から「主流」になっているtidyverse Rがある。僕は、コードが人間にとって自然に読めるという「可読性」を重要視したいと考えている。よって、tidyverse Rに準拠したリソースを重点的に紹介し、最後に、base Rやdata.tableを含むより広いリソースを紹介する。 コツ … インターネットでコードを検索するとき、“tidyverse R”もしくは”dplyr r”などと書き足すと、base Rではなくtidyverse Rの書き方についての情報を見つけやすくなる。 はじめに オンラインの資料 日本語の書籍 発展的内容 tidyverse Rに限定しない発展的内容 1. はじめに まず、プログラミング言語の基礎語彙を学び、実際に手を動かしてみることが効果的である。 R Studio cheat sheets: 最重要のコマンドを簡潔にまとめている。ぜひ印刷をして手元に置き、コマンドを調べるために、すぐに手がかりとできるようにしよう。 data wrangling with dplyr and tidyr data visualization with ggplot2 base R … tidyverse Rを使うとしても、base Rの書き方も把握しておこう。 RStudio Primers: オンライン環境を使って、コードを一歩ずつ書き進めながら勉強することができる。英語ではあるが、コードを書くのに慣れるためにとても効率的である。 2. オンラインの資料 基礎語彙などに加え、多くの概念を体系的に勉強することも役に立つ。Ｒのコミュニティでは、無料で多くの資料が公開されている。 Rで計量政治学入門 … by 土井翔平先生 私たちのR ベストプラクティスの追求 … by 宋財泫先生・矢内勇生先生 Rで学ぶ計量経済学と機械学習 … by 安藤道人先生 The R Graph Gallery … ggplot2を使ったインスピレーション集 3. 日本語の書籍 時間をかけて勉強するためには、オンラインのリソースのみでなく、ページをめくって付箋を貼って勉強したいときもあるだろう。多くの書籍があるが、僕自身がもっともお世話になったものを紹介する。 改訂2版 RユーザのためのRStudio[実践]入門〜tidyverseによるモダンな分析フローの世界 (技術評論社) by 松村優哉、湯谷啓明、紀ノ定保礼、前田和寛 … tidyverse Rの使い方について、具体例をまじえ、丁寧に教えてくれる。 データサイエンスのための Rプログラミングスキル by Michael Freeman &amp; Joel Ross (共立出版) … tidyverse Rの使い方について、考え方や概念なども含め、読みやすく教えてくれる。 Rではじめるデータサイエンス (O’Reilly) by Hadley Wickham &amp; Garrett Grolemund … tidyverseなどをつくった著者たちが、プログラミングの概念などについて厳密に教えてくれる。(この英語の内容は、著者のホームページに公開している。) 実践Data Scienceシリーズ データ分析のためのデータ可視化入門 (講談社) by キーラン・ヒーリー … ggplot2を用いたデータ可視化の考え方を、多くの事例とともに紹介してくれる。 4. 発展的内容 個人のプロジェクトとしてデータを分析するのに加え、グループで分析したり、プログラムを書いたりするために、より発展的な内容を説明しているリソースを紹介する。 Style guides tidyverse style guide: RStudio社内でのRプログラミング・ルール Google style guide: Google社内でのRプログラミング・ルール (関数の戻り値にreturn()のコマンドを明示的に書くべきか、ということについて、２つのstyle guideで考えが異なるようである。) Advanced R by Hadley Wickham … プログラミング言語としてＲを考えるときに役立つ情報がたくさん載っている。 5. tidyverse Rに限定しない発展的内容 R言語の歴史は長く、tidyverse Rのコミュニティ以外にも優れた書籍が多く存在する。その中でも、プログラミングの考え方やbase Rについて特に丁寧に説明しているものを紹介する。 Rプログラミング本格入門:達人データサイエンティストへの道 (共立出版) by Kun Ren … プログラミング言語としてのRの特徴をおさえながら、丁寧に説明をしてくれる。 アート・オブ・Rプログラミング (O’Reilly) by Norman Matloff … デバッグの考え方を丁寧に説明し、プログラミングのために気をつけたいことを詳細に説明してくれる。 The R Tips: データ解析環境Rの基本技・グラフィックス活用集(オーム社) by 舟尾 暢男 … こつこつ著者が丁寧に時間をかけて調べて勉強したことが伝わってくる良書。 上記の書籍は、値段が高いものも多い。購入する前に中身を確認したい人は、大型書店のプログラミング・コーナーでも確認できるものが多いであろうし、研究室に来てもらえれば、確認をしてもらうことができる。 Rプログラムは、日々、ものすごいスピードで進化している。上の資料に加えて、特に便利なリソースを見つけたら、ぜひ教えてほしい。 謝辞: 横浜国大では、多くの学生にプログラミングをサポートしてもらう幸運に恵まれている。上の資料については、近本海瑠さん、坂上幸さん、伊藤弘紀さんからの紹介に感謝を示したい。 "],["rパッケージ活用のエラーへの対処.html", "22 Rパッケージ活用のエラーへの対処", " 22 Rパッケージ活用のエラーへの対処 あらゆる機械や工具において、「可動性」は不具合の原因となりやすい。オープンソースでつくられるパッケージは、Rコミュニティの「活力源」であると同時に、その「可動性」ゆえに不具合につながってしまうことが多い。 package libraryのpathがRStudioに認識されないとき RStudioを最初に設定するとき、パッケージを利用できないことがよくある。(Windowsを使っている学生の25%ほどが、このようなエラーになってしまう。これは、もう、学生のエラーではなく、Windows + RStudioのエラーと言っていいだろう。) 具体的に、install.packages()を実行すると、 ... is not writable.として許可が得られない C:/OneDrive/???/... として日本語のフォルダ名が文字化けしてしまう ことがある。パッケージのコードが保存されているファイルを保存するディレクトリをlibraryと呼ぶ。これらのエラーは、libraryのpathがRStudioにしっかり認識されていないということである。 RStudioを立ち上げるときに、自動でlibrary pathを設定されるように する方法を紹介したい。 Step 1. 手動で、日本語がフォルダー・パスに入らないようにlibraryとするフォルダーを作成する。 OneDriveや、日本語のパスなどがエラーのもととなりやすいようである。 たとえば、Cドライブに直接\"C:/mylib\"というフォルダーを作成する。 Step 2. 新しいフォルダーにlibrary pathを設定する .libPaths()の関数を使い、library pathを設定する。 .libPaths(&quot;C:/mylib&quot;) Step 3. 新しいpathであれば、install.packages()を実行できるかを検証する library pathを変更したらパッケージをインストールできるかを検証しよう。例えば、以下のコードを実行してみることができる。このコードは、「１が数値という変数型である」ことを確認するものである。Test passedと表示されればOKである。 install.packages(&quot;testthat&quot;) testthat::test_that(&#39;1 is a number&#39;, { testthat::expect_true(is.numeric(1)) }) Step 4. RStudioを立ち上げるときに、自動でlibrary pathを設定されるようにする Rを使うときに毎回.libPaths()のコードを実行するのは大変である。そこで、以下の２つのファイルをフォルダーに加えることによって、RStudioを立ち上げるときに自動で設定できる。 .Rprojファイルを、プロジェクトのフォルダーに加える File -&gt; New Project -&gt; Existing Directory -&gt; project working directoryを設定 -&gt; Create Project .Rprofileファイルを、プロジェクトのフォルダーに加える 「メモ帳」のtext fileを開き、“.Rprofile”という名前で保存する (.txtの拡張子が残らないように注意) Step 2の.libPaths(\"C:/mylib\")を内容に書く RStudioを立ち上げるとき、つねに.Rprojファイルをクリックして立ち上げるようにすれば、自動でlibrary pathを設定できる。 library pathのエラーに関するその他のリソース パッケージをインストールする際のエラーは、非常に多いようである。以下のリンクの内容も参考になるだろう。 http://ryotamugiyama.com/2020/08/03/rinstall/ https://qiita.com/Maki-Daisuke/items/0378626c9bf9971f3822 packagesがコンフリクトを起こすとき 実際のプロジェクトでは、複数のパッケージを使うことがある。このとき、後からインストールしたパッケージとの互換性などの問題で、パッケージを実行できなくなるときがある。 上記のStep 1 ～ Step 4の方法は、パッケージのコンフリクトに対しても適用できる。新しいライブラリを作成し、そちらに必要なパッケージを全てインストールしなおすというアプローチである。 別の手法: renvパッケージを用いる それぞれのプロジェクトごとにlibraryを設定することで、上記のような問題を解決することもできる。バージョン管理との互換性のよいパッケージがrenvであり、このプロジェクト例にて、実際に活用している。 "],["補講1-数学.html", "23 補講(1) 数学", " 23 補講(1) 数学 "],["補講2-思索への寄り道.html", "24 補講(2) 思索への寄り道", " 24 補講(2) 思索への寄り道 主要な講義は、統計学分析手法の理論・実践について説明をしてきました。しかし、統計学が独立の手法群として確率される以前から、その基盤としての哲学的思索がありました。この内容は授業の必須ではありませんが、統計学・経済学の授業では扱われることがあまりない哲学的・思索的背景について説明をしたいと思います。統計学を活用していくためには、その内容とともに、その限界・適用範囲の限定性にも思いを馳せることが重要だからです。(この講義は、答えを伝えるのではなく、問いを示すことを目的としているので、「要点」も書きません。) 測定できないもの――観察と意識 可能世界はただ現実世界のみ \\(\\ast\\) なぜ教養を学ぶのか 1. 測定できないもの――観察と意識 2. 可能世界はただ現実世界のみ \\(\\ast\\) なぜ教養を学ぶのか 参考図書・文献 ジェリー・ミュラー『測りすぎ なぜパフォーマンス評価は失敗するのか』(The Tyranny of Metrics) 松本裕訳、みすず書房、2019年 土居健郎 『表と裏』 弘文堂、1985年 遠山啓 『数学の学び方・教え方』 岩波新書、1972年 内田義彦 『読書と社会科学』岩波新書、1985年 三浦英之 『五色の虹 満州建国大学卒業生たちの戦後』集英社、2015年 Kenneth Arrowとクジラ … https://corporatefinancelab.org/2017/02/23/kenneth-arrow-nobel-winning-economist-dies-at-95/ William Shadish, Thomas Cook, and Donald Campbell “Experimental and Quasi-Experimental Designs for Generalized Causal Inference.” Houghton Mifflin Company. 2002. Serrano, Roberto, “Top5itis” 2018. Available at SSRN: https://ssrn.com/abstract=3103083 Irvine, William “A Guide to the Good Life - the Ancient Art of Stoic Joy” Oxford University Press, 2009. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
